<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!-- saved from url=(0081)https://www.rootusers.com/how-to-join-centos-linux-to-an-active-directory-domain/ -->
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US"><script src="./How To Join CentOS Linux To An Active Directory Domain_files/osd.js.download"></script><script src="./How To Join CentOS Linux To An Active Directory Domain_files/f(7).txt" id="google_shimpl"></script><script async="" src="./How To Join CentOS Linux To An Active Directory Domain_files/analytics.js.download"></script><script src="chrome-extension://ljdobmomdgdljniojadhoplhkpialdid/page/prompt.js"></script><script src="chrome-extension://ljdobmomdgdljniojadhoplhkpialdid/page/runScript.js"></script><head profile="http://gmpg.org/xfn/11"><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><script async="" src="https://graph.facebook.com/?callback=WPCOMSharing.update_facebook_count&amp;ids=https%3A%2F%2Fwww.rootusers.com%2Fhow-to-join-centos-linux-to-an-active-directory-domain%2F&amp;_=1576669748720"></script><script async="" src="https://api.pinterest.com/v1/urls/count.json?callback=WPCOMSharing.update_pinterest_count&amp;url=https%3A%2F%2Fwww.rootusers.com%2Fhow-to-join-centos-linux-to-an-active-directory-domain%2F&amp;_=1576669748719"></script><title>How To Join CentOS Linux To An Active Directory Domain</title><script src="./How To Join CentOS Linux To An Active Directory Domain_files/T2W3C1Lwrcjt99s-WvR0K69rlQA.js.download"></script><link rel="stylesheet" href="./How To Join CentOS Linux To An Active Directory Domain_files/de2dd.css" media="all"><link rel="pingback" href="https://www.rootusers.com/xmlrpc.php"><meta name="description" content="Learn how to join a CentOS Linux server to a Microsoft Windows Active Directory domain. This will allow you to SSH into Linux with a central AD user account."><meta name="robots" content="max-snippet:-1, max-image-preview:large, max-video-preview:-1"><link rel="canonical" href="https://www.rootusers.com/how-to-join-centos-linux-to-an-active-directory-domain/"><meta property="og:locale" content="en_US"><meta property="og:type" content="article"><meta property="og:title" content="How To Join CentOS Linux To An Active Directory Domain"><meta property="og:description" content="Learn how to join a CentOS Linux server to a Microsoft Windows Active Directory domain. This will allow you to SSH into Linux with a central AD user account."><meta property="og:url" content="https://www.rootusers.com/how-to-join-centos-linux-to-an-active-directory-domain/"><meta property="og:site_name" content="RootUsers"><meta property="article:publisher" content="https://www.facebook.com/rootusers1/"><meta property="article:tag" content="Active Directory"><meta property="article:tag" content="Linux"><meta property="article:section" content="How To"><meta property="article:published_time" content="2016-12-27T14:01:41+00:00"><meta property="article:modified_time" content="2018-07-18T10:04:46+00:00"><meta property="og:updated_time" content="2018-07-18T10:04:46+00:00"><meta property="og:image" content="https://www.rootusers.com/wp-content/uploads/2016/12/join-linux-to-windows-domain.png"><meta property="og:image:secure_url" content="https://www.rootusers.com/wp-content/uploads/2016/12/join-linux-to-windows-domain.png"><meta property="og:image:width" content="300"><meta property="og:image:height" content="200"><meta name="twitter:card" content="summary"><meta name="twitter:description" content="Learn how to join a CentOS Linux server to a Microsoft Windows Active Directory domain. This will allow you to SSH into Linux with a central AD user account."><meta name="twitter:title" content="How To Join CentOS Linux To An Active Directory Domain"><meta name="twitter:site" content="@rootusers_"><meta name="twitter:image" content="https://www.rootusers.com/wp-content/uploads/2016/12/join-linux-to-windows-domain.png"><meta name="twitter:creator" content="@rootusers_"> <script type="application/ld+json" class="yoast-schema-graph yoast-schema-graph--main">{"@context":"https://schema.org","@graph":[{"@type":"WebSite","@id":"https://www.rootusers.com/#website","url":"https://www.rootusers.com/","name":"RootUsers","description":"Guides, tutorials, reviews and news for System Administrators.","publisher":{"@id":"https://www.rootusers.com/#/schema/person/"},"potentialAction":{"@type":"SearchAction","target":"https://www.rootusers.com/?s={search_term_string}","query-input":"required name=search_term_string"}},{"@type":"ImageObject","@id":"https://www.rootusers.com/how-to-join-centos-linux-to-an-active-directory-domain/#primaryimage","url":"https://www.rootusers.com/wp-content/uploads/2016/12/join-linux-to-windows-domain.png","width":300,"height":200,"caption":"Join Linux to Windows domain"},{"@type":"WebPage","@id":"https://www.rootusers.com/how-to-join-centos-linux-to-an-active-directory-domain/#webpage","url":"https://www.rootusers.com/how-to-join-centos-linux-to-an-active-directory-domain/","inLanguage":"en-US","name":"How To Join CentOS Linux To An Active Directory Domain","isPartOf":{"@id":"https://www.rootusers.com/#website"},"primaryImageOfPage":{"@id":"https://www.rootusers.com/how-to-join-centos-linux-to-an-active-directory-domain/#primaryimage"},"datePublished":"2016-12-27T14:01:41+00:00","dateModified":"2018-07-18T10:04:46+00:00","description":"Learn how to join a CentOS Linux server to a Microsoft Windows Active Directory domain. This will allow you to SSH into Linux with a central AD user account."},{"@type":"Article","@id":"https://www.rootusers.com/how-to-join-centos-linux-to-an-active-directory-domain/#article","isPartOf":{"@id":"https://www.rootusers.com/how-to-join-centos-linux-to-an-active-directory-domain/#webpage"},"author":{"@id":"https://www.rootusers.com/#/schema/person/fef4c11b68480475800d73659aa28409"},"headline":"How To Join CentOS Linux To An Active Directory Domain","datePublished":"2016-12-27T14:01:41+00:00","dateModified":"2018-07-18T10:04:46+00:00","commentCount":"99","mainEntityOfPage":{"@id":"https://www.rootusers.com/how-to-join-centos-linux-to-an-active-directory-domain/#webpage"},"publisher":{"@id":"https://www.rootusers.com/#/schema/person/"},"image":{"@id":"https://www.rootusers.com/how-to-join-centos-linux-to-an-active-directory-domain/#primaryimage"},"keywords":"Active Directory,Linux","articleSection":"How To,Linux"},{"@type":["Person"],"@id":"https://www.rootusers.com/#/schema/person/fef4c11b68480475800d73659aa28409","name":"Jarrod","sameAs":[]}]}</script> <link rel="dns-prefetch" href="https://www.rootusers.com/"><link rel="dns-prefetch" href="https://s0.wp.com/"><link rel="dns-prefetch" href="https://s.w.org/"><link rel="alternate" type="application/rss+xml" title="RootUsers » Feed" href="https://www.rootusers.com/feed/"><link rel="alternate" type="application/rss+xml" title="RootUsers » Comments Feed" href="https://www.rootusers.com/comments/feed/"><link rel="alternate" type="application/rss+xml" title="RootUsers » How To Join CentOS Linux To An Active Directory Domain Comments Feed" href="https://www.rootusers.com/how-to-join-centos-linux-to-an-active-directory-domain/feed/"> <script type="text/javascript">window._wpemojiSettings={"baseUrl":"https:\/\/s.w.org\/images\/core\/emoji\/12.0.0-1\/72x72\/","ext":".png","svgUrl":"https:\/\/s.w.org\/images\/core\/emoji\/12.0.0-1\/svg\/","svgExt":".svg","source":{"concatemoji":"https:\/\/www.rootusers.com\/wp-includes\/js\/wp-emoji-release.min.js?ver=5.3.1"}};!function(e,a,t){var r,n,o,i,p=a.createElement("canvas"),s=p.getContext&&p.getContext("2d");function c(e,t){var a=String.fromCharCode;s.clearRect(0,0,p.width,p.height),s.fillText(a.apply(this,e),0,0);var r=p.toDataURL();return s.clearRect(0,0,p.width,p.height),s.fillText(a.apply(this,t),0,0),r===p.toDataURL()}function l(e){if(!s||!s.fillText)return!1;switch(s.textBaseline="top",s.font="600 32px Arial",e){case"flag":return!c([127987,65039,8205,9895,65039],[127987,65039,8203,9895,65039])&&(!c([55356,56826,55356,56819],[55356,56826,8203,55356,56819])&&!c([55356,57332,56128,56423,56128,56418,56128,56421,56128,56430,56128,56423,56128,56447],[55356,57332,8203,56128,56423,8203,56128,56418,8203,56128,56421,8203,56128,56430,8203,56128,56423,8203,56128,56447]));case"emoji":return!c([55357,56424,55356,57342,8205,55358,56605,8205,55357,56424,55356,57340],[55357,56424,55356,57342,8203,55358,56605,8203,55357,56424,55356,57340])}return!1}function d(e){var t=a.createElement("script");t.src=e,t.defer=t.type="text/javascript",a.getElementsByTagName("head")[0].appendChild(t)}for(i=Array("flag","emoji"),t.supports={everything:!0,everythingExceptFlag:!0},o=0;o<i.length;o++)t.supports[i[o]]=l(i[o]),t.supports.everything=t.supports.everything&&t.supports[i[o]],"flag"!==i[o]&&(t.supports.everythingExceptFlag=t.supports.everythingExceptFlag&&t.supports[i[o]]);t.supports.everythingExceptFlag=t.supports.everythingExceptFlag&&!t.supports.flag,t.DOMReady=!1,t.readyCallback=function(){t.DOMReady=!0},t.supports.everything||(n=function(){t.readyCallback()},a.addEventListener?(a.addEventListener("DOMContentLoaded",n,!1),e.addEventListener("load",n,!1)):(e.attachEvent("onload",n),a.attachEvent("onreadystatechange",function(){"complete"===a.readyState&&t.readyCallback()})),(r=t.source||{}).concatemoji?d(r.concatemoji):r.wpemoji&&r.twemoji&&(d(r.twemoji),d(r.wpemoji)))}(window,document,window._wpemojiSettings);</script> <style type="text/css">img.wp-smiley,img.emoji{display:inline !important;border:none !important;box-shadow:none !important;height:1em !important;width:1em !important;margin:0 .07em !important;vertical-align:-0.1em !important;background:none !important;padding:0 !important}</style><link rel="stylesheet" href="./How To Join CentOS Linux To An Active Directory Domain_files/50c73.css" media="all"> <script defer="" src="./How To Join CentOS Linux To An Active Directory Domain_files/df983.js.download" type="text/javascript"></script> <script type="text/javascript">var related_posts_js_options={"post_heading":"h4"};</script> <script defer="" src="./How To Join CentOS Linux To An Active Directory Domain_files/8efe6.js.download" type="text/javascript"></script> <link rel="https://api.w.org/" href="https://www.rootusers.com/wp-json/"><link rel="EditURI" type="application/rsd+xml" title="RSD" href="https://www.rootusers.com/xmlrpc.php?rsd"><link rel="wlwmanifest" type="application/wlwmanifest+xml" href="https://www.rootusers.com/wp-includes/wlwmanifest.xml"><meta name="generator" content="WordPress 5.3.1"><link rel="shortlink" href="https://wp.me/p5y7ho-Rn"><link rel="alternate" type="application/json+oembed" href="https://www.rootusers.com/wp-json/oembed/1.0/embed?url=https%3A%2F%2Fwww.rootusers.com%2Fhow-to-join-centos-linux-to-an-active-directory-domain%2F"><link rel="alternate" type="text/xml+oembed" href="https://www.rootusers.com/wp-json/oembed/1.0/embed?url=https%3A%2F%2Fwww.rootusers.com%2Fhow-to-join-centos-linux-to-an-active-directory-domain%2F&amp;format=xml"><link rel="dns-prefetch" href="https://v0.wordpress.com/"><style type="text/css">img#wpstats{display:none}</style><meta name="viewport" content="width=device-width"><script src="./How To Join CentOS Linux To An Active Directory Domain_files/wp-emoji-release.min.js.download" type="text/javascript" defer=""></script><link rel="preload" href="./How To Join CentOS Linux To An Active Directory Domain_files/f(8).txt" as="script"><script type="text/javascript" src="./How To Join CentOS Linux To An Active Directory Domain_files/f(8).txt"></script></head><body class="post-template-default single single-post postid-3309 single-format-standard"><div id="nav"><div class="nav-inside"><div id="menus"><ul id="menus-dt" class="menus-dt"><li id="menu-item-1580" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home menu-item-1580"><a href="https://www.rootusers.com/">Home</a></li><li id="menu-item-3012" class="menu-item menu-item-type-taxonomy menu-item-object-category current-post-ancestor current-menu-parent current-post-parent menu-item-3012"><a href="https://www.rootusers.com/category/linux/">Linux</a></li><li id="menu-item-3013" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-3013"><a href="https://www.rootusers.com/category/windows/">Windows</a></li><li id="menu-item-3014" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-3014"><a href="https://www.rootusers.com/category/security/">Security</a></li><li id="menu-item-3015" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children menu-item-3015"><a href="https://www.rootusers.com/category/exam-guides/">Exam Guides</a><ul class="sub-menu"><li id="menu-item-2087" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2087"><a href="https://www.rootusers.com/red-hat-certified-engineer-rhce-7-ex300-study-guide/">Red Hat Certified Engineer (RHCE) 7 EX300 Study Guide</a></li><li id="menu-item-5173" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-5173"><a href="https://www.rootusers.com/red-hat-certified-system-administrator-rhcsa-ex200-study-guide/">Red Hat Certified System Administrator (RHCSA) 8 EX200 Study Guide</a></li><li id="menu-item-3524" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-3524"><a href="https://www.rootusers.com/microsoft-70-744-securing-windows-server-2016-study-guide/">Microsoft 70-744 Securing Windows Server 2016 Study Guide</a></li></ul></li><li id="menu-item-1582" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-1582"><a href="https://www.rootusers.com/archives/">Archives</a></li><li id="menu-item-1581" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-1581"><a href="https://www.rootusers.com/about/">About</a></li><li id="menu-item-3011" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-3011"><a href="https://www.rootusers.com/contact/">Contact</a></li></ul><ul id="menus-m" class="menus-m"><li>Menu</li></ul></div><div id="search"><form id="searchform" method="get" action="https://www.rootusers.com/">
<input type="text" value="Search: type, hit enter" onfocus="if (!window.__cfRLUnblockHandlers) return false; if (this.value == &#39;Search: type, hit enter&#39;) {this.value = &#39;&#39;;}" onblur="if (!window.__cfRLUnblockHandlers) return false; if (this.value == &#39;&#39;) {this.value = &#39;Search: type, hit enter&#39;;}" size="35" maxlength="50" name="s" id="s">
<input type="submit" id="searchsubmit" value="SEARCH"></form></div></div></div><div id="header"><div class="site_title"><h1><a href="https://www.rootusers.com/">RootUsers</a></h1><h2>Guides, tutorials, reviews and news for System Administrators.</h2><div class="clear"></div></div></div><div id="wrapper"><div id="content"><div class="post-single post-3309 post type-post status-publish format-standard has-post-thumbnail hentry category-how-to category-linux tag-active-directory tag-linux" id="post-3309"><h2 class="title">How To Join CentOS Linux To An Active Directory Domain</h2><div class="post-info-top">
<span class="post-info-date">
Posted by <a href="https://www.rootusers.com/author/jarrod/" title="View all posts by Jarrod" rel="author">Jarrod</a>
on December 28, 2016	</span>
<span class="addcomment"><a href="https://www.rootusers.com/how-to-join-centos-linux-to-an-active-directory-domain/#respond" rel="nofollow" title="Leave a comment ?">Leave a comment</a> (99)</span>
<span class="gotocomments"><a href="https://www.rootusers.com/how-to-join-centos-linux-to-an-active-directory-domain/#comments" rel="nofollow" title="Go to comments ?">Go to comments</a></span></div><div class="clear"></div><div class="entry"><p>Here we’ll show you how to add your Linux system to a Microsoft Windows Active Directory (AD) domain through the command line. This will allow us to SSH into the Linux server with user accounts in our AD domain, providing a central source of cross-platform authentication.</p><p><span id="more-3309"></span></p><p>There are a number of ways to do this, however this is the easiest way that I’ve found to do it entirely through the command line.</p><p>In this example I am using CentOS 7 and Windows Server 2012 R2, however the version of Windows should not matter. We are assuming that our domain is already setup and configured, we’re simply joining our CentOS server to an existing domain.<br> <script async="" src="./How To Join CentOS Linux To An Active Directory Domain_files/f(9).txt" type="text/javascript"></script><br>
<ins class="adsbygoogle" style="display: block; text-align: center; height: 155px;" data-ad-layout="in-article" data-ad-format="fluid" data-ad-client="ca-pub-5558140142523368" data-ad-slot="7302434825" data-adsbygoogle-status="done"><ins id="aswift_0_expand" style="display:inline-table;border:none;height:155px;margin:0;padding:0;position:relative;visibility:visible;width:620px;background-color:transparent;"><ins id="aswift_0_anchor" style="display:block;border:none;height:155px;margin:0;padding:0;position:relative;visibility:visible;width:620px;background-color:transparent;"><iframe width="620" height="155" frameborder="0" marginwidth="0" marginheight="0" vspace="0" hspace="0" allowtransparency="true" scrolling="no" allowfullscreen="true" onload="var i=this.id,s=window.google_iframe_oncopy,H=s&amp;&amp;s.handlers,h=H&amp;&amp;H[i],w=this.contentWindow,d;try{d=w.document}catch(e){}if(h&amp;&amp;d&amp;&amp;(!d.body||!d.body.firstChild)){if(h.call){setTimeout(h,0)}else if(h.match){try{h=s.upd(h,i)}catch(e){}w.location.replace(h)}}" id="aswift_0" name="aswift_0" style="left:0;position:absolute;top:0;border:0px;width:620px;height:155px;" src="./How To Join CentOS Linux To An Active Directory Domain_files/saved_resource(4).html"></iframe></ins></ins></ins><br> <script type="text/javascript">(adsbygoogle=window.adsbygoogle||[]).push({});</script></p><h2>Preparing CentOS</h2><p>First we want to install all of the below packages in CentOS.</p><pre>yum install sssd realmd oddjob oddjob-mkhomedir adcli samba-common samba-common-tools krb5-workstation openldap-clients policycoreutils-python -y
</pre><p>The CentOS server will need to be able to resolve the Active Directory domain in order to successfully join it. In this instance my DNS server in /etc/resolv.conf is set to one of the Active Directory servers hosting the example.com domain that I wish to join.</p><pre>[root@centos7 ~]# <strong>cat /etc/resolv.conf</strong>
search example.com
nameserver 192.168.1.2
</pre><h2>Join CentOS To Windows Domain</h2><p>Now that we’ve got that out of the way we can actually join the domain, this can be done with the ‘realm join’ command as shown below. You will need to specify the username of a user in the domain that has privileges to join a computer to the domain.</p><pre>[root@centos7 ~]# <strong>realm join --user=administrator example.com</strong>
Password for administrator:
</pre><p>Once you enter the password for your specific account, the /etc/sssd/sssd.conf and /etc/krb.conf files will be automatically configured. This is really great as editing these manually usually leads to all sorts of trivial problems when joining the domain. The /etc/krb5.keytab file is also created during this process.</p><p>If this fails, you can add -v to the end of the command for highly verbose output, which should give you more detailed information regarding the problem for further troubleshooting.</p><p>We can confirm that we’re in the realm (Linux terminology for the domain) by running the ‘realm list’ command, as shown below.</p><pre>[root@centos7 ~]# <strong>realm list</strong>
example.com
  type: kerberos
  realm-name: EXAMPLE.COM
  domain-name: example.com
  configured: kerberos-member
  server-software: active-directory
  client-software: sssd
  required-package: oddjob
  required-package: oddjob-mkhomedir
  required-package: sssd
  required-package: adcli
  required-package: samba-common-tools
  login-formats: %U@example.com
  login-policy: allow-realm-logins
</pre><p>Once this has completed successfully, a computer object will be created in Active Directory in the default computers container as shown below.</p><p><a href="./How To Join CentOS Linux To An Active Directory Domain_files/active-directory-users-and-computers.png"><img src="./How To Join CentOS Linux To An Active Directory Domain_files/active-directory-users-and-computers.png" alt="Active Directory Users and Computers - Linux Computer Object" width="579" height="375" class="aligncenter size-full wp-image-3313" srcset="https://www.rootusers.com/wp-content/uploads/2016/12/active-directory-users-and-computers.png 579w, https://www.rootusers.com/wp-content/uploads/2016/12/active-directory-users-and-computers-300x194.png 300w" sizes="(max-width: 579px) 100vw, 579px"></a></p><p>To keep things neat I like to move this into some other organizational unit (OU) for Linux servers rather than leaving things in the default computers container, however this doesn’t really matter for this exercise.</p><p>Now that our Linux server is a member of the Active Directory domain we can perform some tests. By default if we want to specify any users in the domain, we need to specify the domain name. For example with the ‘id’ command below, we get nothing back for ‘administrator’, however ‘administrator@example.com’ shows the UID for the account as well as all the groups the account is a member of in the Active Directory domain.</p><pre>[root@centos7 ~]# <strong>id administrator</strong>
id: administrator: no such user

[root@centos7 ~]# <strong>id administrator@example.com</strong>
uid=1829600500(administrator@example.com) gid=1829600513(domain users@example.com) groups=1829600513(domain users@example.com),1829600512(domain admins@example.com),1829600572(denied rodc password replication group@example.com),1829600519(enterprise admins@example.com),1829600518(schema admins@example.com),1829600520(group policy creator owners@example.com)
</pre><p>We can change this behaviour by modifying the /etc/sssd/sssd.conf file, the following lines need to change from:</p><pre>use_fully_qualified_names = True
fallback_homedir = /home/%u@%d
</pre><p>To the below, which does not require the fully qualified domain name (FQDN) to be specified. This also modifies the user directory in /home from having the FQDN specified after the username.</p><pre>use_fully_qualified_names = False
fallback_homedir = /home/%u
</pre><p>To apply these changes, restart sssd.</p><pre>[root@centos7 ~]# <strong>systemctl restart sssd</strong>
</pre><p>Now we should be able to find user accounts without specifying the domain, as shown below this now works where it did not previously.</p><pre>[root@centos7 ~]# <strong>id administrator</strong>
uid=1829600500(administrator) gid=1829600513(domain users) groups=1829600513(domain users),1829600512(domain admins),1829600572(denied rodc password replication group),1829600520(group policy creator owners),1829600519(enterprise admins),1829600518(schema admins)
</pre><p>If this is still not correctly working for you, I suggest that you take a look at <a href="https://www.rootusers.com/how-to-clear-the-sssd-cache-in-linux/" target="_blank">flushing your sssd cache</a>.</p><h2>Configuring SSH and Sudo Access</h2><p>Now that we have successfully joined our CentOS server to the example.com domain, we can SSH in as any domain user from Active Directory with default settings.</p><pre>[root@centos7 ~]# <strong>ssh user1@localhost</strong>
user1@localhost's password:
Creating home directory for user1.
</pre><p>We can further restrict SSH access by modifying the /etc/ssh/sshd_config file and make use of things like AllowUsers or AllowGroups to only allow certain user or groups from AD to have access. See <a href="https://www.rootusers.com/configure-additional-options-described-in-documentation-for-ssh-in-linux/" target="_blank">our guide to the sshd_config file for further information</a>. Don’t forget to restart sshd if you make any changes to this file in order to apply them.</p><p>We can also modify our sudoers configuration to allow our user account from the domain the desired level of access. I usually create an Active Directory group called something like ‘sudoers’, put my user in it, then allow this group sudo access by creating a file in /etc/sudoers.d/ which allows root access to be centrally controlled by AD.</p><p>Below is an example of this, the ‘sudoers’ group will have full root access.</p><pre>[root@centos7 ~]# <strong>cat /etc/sudoers.d/sudoers</strong>
%sudoers    ALL=(ALL)       ALL
</pre><p>This group only exists in Active Directory, our Linux server can see that user1 is a member of the sudoers group in Active Directory, and respects this group configuration and allows user1 root privileges as per the above configuration.</p><p><a href="./How To Join CentOS Linux To An Active Directory Domain_files/group-properties.png"><img src="./How To Join CentOS Linux To An Active Directory Domain_files/group-properties.png" alt="Active Directory Group Permissions" width="413" height="461" class="aligncenter size-full wp-image-3314" srcset="https://www.rootusers.com/wp-content/uploads/2016/12/group-properties.png 413w, https://www.rootusers.com/wp-content/uploads/2016/12/group-properties-269x300.png 269w" sizes="(max-width: 413px) 100vw, 413px"></a></p><p></p><center><em>The username of Test Account is ‘user1’.</em></center><p></p><p>With this in place, our user1 account in the example.com Active Directory domain will now be able to use the sudo command to run commands with root privileges.</p><pre>[user1@centos7 ~]$ <strong>sudo su</strong>
[sudo] password for user1:
[root@centos7 user1]#
[root@centos7 user1]# <strong>whoami</strong>
root
</pre><p>That’s all there is to it, we can now SSH to a Linux server with a user account from our Active Directory domain and even grant specific users or groups from AD specific levels of access.</p><h2>Leaving The Domain</h2><p>If you want to reverse the process and remove yourself from the domain, simply run the ‘realm leave’ command followed by the domain name, as shown below.</p><pre>[root@centos7 ~]# <strong>realm leave example.com</strong>
</pre><p>This will complete without any further user input. It will delete the computer object that was created in Active Directory, remove the keytab file, and set the sssd.conf and krb5.conf files back to default.<br> <script async="" src="./How To Join CentOS Linux To An Active Directory Domain_files/f(9).txt" type="text/javascript"></script><br>
<ins class="adsbygoogle" style="display: block; text-align: center; height: 155px;" data-ad-layout="in-article" data-ad-format="fluid" data-ad-client="ca-pub-5558140142523368" data-ad-slot="7302434825" data-adsbygoogle-status="done"><ins id="aswift_1_expand" style="display:inline-table;border:none;height:155px;margin:0;padding:0;position:relative;visibility:visible;width:620px;background-color:transparent;"><ins id="aswift_1_anchor" style="display:block;border:none;height:155px;margin:0;padding:0;position:relative;visibility:visible;width:620px;background-color:transparent;"><iframe width="620" height="155" frameborder="0" marginwidth="0" marginheight="0" vspace="0" hspace="0" allowtransparency="true" scrolling="no" allowfullscreen="true" onload="var i=this.id,s=window.google_iframe_oncopy,H=s&amp;&amp;s.handlers,h=H&amp;&amp;H[i],w=this.contentWindow,d;try{d=w.document}catch(e){}if(h&amp;&amp;d&amp;&amp;(!d.body||!d.body.firstChild)){if(h.call){setTimeout(h,0)}else if(h.match){try{h=s.upd(h,i)}catch(e){}w.location.replace(h)}}" id="aswift_1" name="aswift_1" style="left:0;position:absolute;top:0;border:0px;width:620px;height:155px;" src="./How To Join CentOS Linux To An Active Directory Domain_files/saved_resource(5).html"></iframe></ins></ins></ins><br> <script type="text/javascript">(adsbygoogle=window.adsbygoogle||[]).push({});</script></p><h2>Summary</h2><p>We have demonstrated how you can easily add your CentOS Linux system to a Microsoft Windows Active Directory domain, and then grant SSH or sudo access based on the user or group from the domain.</p><p>If you have a large number of Linux servers and an existing Windows domain you can easily use this process to add your Linux servers to the Windows domain, allowing for centralised user authentication which is far easier to manage when compared to having local user accounts spread out on every Linux server.</p><div class="sharedaddy sd-sharing-enabled"><div class="robots-nocontent sd-block sd-social sd-social-icon sd-sharing"><h3 class="sd-title">Share this:</h3><div class="sd-content"><ul><li class="share-facebook"><a rel="nofollow noopener noreferrer" data-shared="sharing-facebook-3309" class="share-facebook sd-button share-icon no-text" href="https://www.rootusers.com/how-to-join-centos-linux-to-an-active-directory-domain/?share=facebook&amp;nb=1" target="_blank" title="Click to share on Facebook"><span></span><span class="sharing-screen-reader-text">Click to share on Facebook (Opens in new window)</span></a></li><li class="share-twitter"><a rel="nofollow noopener noreferrer" data-shared="sharing-twitter-3309" class="share-twitter sd-button share-icon no-text" href="https://www.rootusers.com/how-to-join-centos-linux-to-an-active-directory-domain/?share=twitter&amp;nb=1" target="_blank" title="Click to share on Twitter"><span></span><span class="sharing-screen-reader-text">Click to share on Twitter (Opens in new window)</span></a></li><li class="share-linkedin"><a rel="nofollow noopener noreferrer" data-shared="sharing-linkedin-3309" class="share-linkedin sd-button share-icon no-text" href="https://www.rootusers.com/how-to-join-centos-linux-to-an-active-directory-domain/?share=linkedin&amp;nb=1" target="_blank" title="Click to share on LinkedIn"><span></span><span class="sharing-screen-reader-text">Click to share on LinkedIn (Opens in new window)</span></a></li><li class="share-tumblr"><a rel="nofollow noopener noreferrer" data-shared="" class="share-tumblr sd-button share-icon no-text" href="https://www.rootusers.com/how-to-join-centos-linux-to-an-active-directory-domain/?share=tumblr&amp;nb=1" target="_blank" title="Click to share on Tumblr"><span></span><span class="sharing-screen-reader-text">Click to share on Tumblr (Opens in new window)</span></a></li><li class="share-reddit"><a rel="nofollow noopener noreferrer" data-shared="" class="share-reddit sd-button share-icon no-text" href="https://www.rootusers.com/how-to-join-centos-linux-to-an-active-directory-domain/?share=reddit&amp;nb=1" target="_blank" title="Click to share on Reddit"><span></span><span class="sharing-screen-reader-text">Click to share on Reddit (Opens in new window)</span></a></li><li class="share-pinterest"><a rel="nofollow noopener noreferrer" data-shared="sharing-pinterest-3309" class="share-pinterest sd-button share-icon no-text" href="https://www.rootusers.com/how-to-join-centos-linux-to-an-active-directory-domain/?share=pinterest&amp;nb=1" target="_blank" title="Click to share on Pinterest"><span></span><span class="sharing-screen-reader-text">Click to share on Pinterest (Opens in new window)</span></a></li><li class="share-pocket"><a rel="nofollow noopener noreferrer" data-shared="" class="share-pocket sd-button share-icon no-text" href="https://www.rootusers.com/how-to-join-centos-linux-to-an-active-directory-domain/?share=pocket&amp;nb=1" target="_blank" title="Click to share on Pocket"><span></span><span class="sharing-screen-reader-text">Click to share on Pocket (Opens in new window)</span></a></li><li class="share-email share-service-visible"><a rel="nofollow noopener noreferrer" data-shared="" class="share-email sd-button share-icon no-text" href="https://www.rootusers.com/how-to-join-centos-linux-to-an-active-directory-domain/?share=email&amp;nb=1" target="_blank" title="Click to email this to a friend"><span></span><span class="sharing-screen-reader-text">Click to email this to a friend (Opens in new window)</span></a></li><li class="share-end"></li></ul></div></div></div><div id="jp-relatedposts" class="jp-relatedposts"><h3 class="jp-relatedposts-headline"><em>Related</em></h3></div></div><div class="post-info-bottom">
<span class="post-info-category"><a href="https://www.rootusers.com/category/how-to/" rel="category tag">How To</a>, <a href="https://www.rootusers.com/category/linux/" rel="category tag">Linux</a></span><span class="post-info-tags"><a href="https://www.rootusers.com/tag/active-directory/" rel="tag">Active Directory</a>, <a href="https://www.rootusers.com/tag/linux/" rel="tag">Linux</a></span></div><div id="nav-below"><div class="nav-previous"><a href="https://www.rootusers.com/12-dig-command-examples-to-query-dns-in-linux/" rel="prev"><span class="meta-nav">←</span> 12 Dig Command Examples To Query DNS In Linux</a></div><div class="nav-next"><a href="https://www.rootusers.com/how-to-install-dnf-package-manager-in-centosrhel/" rel="next">How To Install DNF Package Manager In CentOS/RHEL <span class="meta-nav">→</span></a></div></div></div><div id="comments-div"><span id="comments-addcomment"><a href="https://www.rootusers.com/how-to-join-centos-linux-to-an-active-directory-domain/#respond" rel="nofollow" title="Leave a comment ?">Leave a comment ?</a></span><h2 id="comments">99 Comments.</h2></div><ol class="commentlist" id="thecomments"><li class="comment even thread-even depth-1" id="li-comment-2624"><div id="comment-2624"><div class="comment-author vcard">
<cite class="fn">Ana</cite>
<span class="comment-meta commentmetadata"><a href="https://www.rootusers.com/how-to-join-centos-linux-to-an-active-directory-domain/#comment-2624">February 21, 2017 at 7:02 am</a></span></div><div class="comment-text"><p>Thank you Jarrod for the most useful article!</p></div><div class="reply">
<a rel="nofollow" class="comment-reply-link" href="https://www.rootusers.com/how-to-join-centos-linux-to-an-active-directory-domain/#comment-2624" data-commentid="2624" data-postid="3309" data-belowelement="comment-2624" data-respondelement="respond" aria-label="Reply to Ana">Reply</a></div></div></li><li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-2660"><div id="comment-2660"><div class="comment-author vcard">
<cite class="fn">Maas Salem</cite>
<span class="comment-meta commentmetadata"><a href="https://www.rootusers.com/how-to-join-centos-linux-to-an-active-directory-domain/#comment-2660">March 1, 2017 at 12:47 am</a></span></div><div class="comment-text"><p>Might want to add this.</p><p>yum install samba-common-tools -y</p><p>– of you wont be able to join the domain. ( error in missing packages.)</p><p>Thanks</p></div><div class="reply">
<a rel="nofollow" class="comment-reply-link" href="https://www.rootusers.com/how-to-join-centos-linux-to-an-active-directory-domain/#comment-2660" data-commentid="2660" data-postid="3309" data-belowelement="comment-2660" data-respondelement="respond" aria-label="Reply to Maas Salem">Reply</a></div></div><ul class="children"><li class="comment even depth-2" id="li-comment-2707"><div id="comment-2707"><div class="comment-author vcard">
<cite class="fn">Olivier</cite>
<span class="comment-meta commentmetadata"><a href="https://www.rootusers.com/how-to-join-centos-linux-to-an-active-directory-domain/#comment-2707">March 8, 2017 at 12:26 am</a></span></div><div class="comment-text"><p>Same here</p></div><div class="reply">
<a rel="nofollow" class="comment-reply-link" href="https://www.rootusers.com/how-to-join-centos-linux-to-an-active-directory-domain/#comment-2707" data-commentid="2707" data-postid="3309" data-belowelement="comment-2707" data-respondelement="respond" aria-label="Reply to Olivier">Reply</a></div></div></li><li class="comment byuser comment-author-jarrod bypostauthor odd alt depth-2" id="li-comment-2709"><div id="comment-2709"><div class="comment-author vcard">
<cite class="fn"><a href="https://www.rootusers.com/" rel="external nofollow ugc" class="url">Jarrod</a></cite>
<span class="comment-meta commentmetadata"><a href="https://www.rootusers.com/how-to-join-centos-linux-to-an-active-directory-domain/#comment-2709">March 8, 2017 at 7:53 am</a></span></div><div class="comment-text"><p>Hmm I looked over the Ansible config I deploy this to Linux servers with and that package is not installed, although on the two servers I checked they already had that package. I’ll update the post, thanks.</p></div><div class="reply">
<a rel="nofollow" class="comment-reply-link" href="https://www.rootusers.com/how-to-join-centos-linux-to-an-active-directory-domain/#comment-2709" data-commentid="2709" data-postid="3309" data-belowelement="comment-2709" data-respondelement="respond" aria-label="Reply to Jarrod">Reply</a></div></div><ul class="children"><li class="comment even depth-3" id="li-comment-3205"><div id="comment-3205"><div class="comment-author vcard">
<cite class="fn">Dave</cite>
<span class="comment-meta commentmetadata"><a href="https://www.rootusers.com/how-to-join-centos-linux-to-an-active-directory-domain/#comment-3205">November 15, 2017 at 9:13 am</a></span></div><div class="comment-text"><p>This seems to have been added as a dependency with the above packages in 7.x, at least as of 11/2017.</p></div><div class="reply">
<a rel="nofollow" class="comment-reply-link" href="https://www.rootusers.com/how-to-join-centos-linux-to-an-active-directory-domain/#comment-3205" data-commentid="3205" data-postid="3309" data-belowelement="comment-3205" data-respondelement="respond" aria-label="Reply to Dave">Reply</a></div></div></li></ul></li></ul></li><li class="comment odd alt thread-even depth-1" id="li-comment-2727"><div id="comment-2727"><div class="comment-author vcard">
<cite class="fn">Hari</cite>
<span class="comment-meta commentmetadata"><a href="https://www.rootusers.com/how-to-join-centos-linux-to-an-active-directory-domain/#comment-2727">March 14, 2017 at 2:53 am</a></span></div><div class="comment-text"><p>Superb ! It worked for me.</p></div><div class="reply">
<a rel="nofollow" class="comment-reply-link" href="https://www.rootusers.com/how-to-join-centos-linux-to-an-active-directory-domain/#comment-2727" data-commentid="2727" data-postid="3309" data-belowelement="comment-2727" data-respondelement="respond" aria-label="Reply to Hari">Reply</a></div></div></li><li class="comment even thread-odd thread-alt depth-1" id="li-comment-2737"><div id="comment-2737"><div class="comment-author vcard">
<cite class="fn">Gaby</cite>
<span class="comment-meta commentmetadata"><a href="https://www.rootusers.com/how-to-join-centos-linux-to-an-active-directory-domain/#comment-2737">March 16, 2017 at 9:29 am</a></span></div><div class="comment-text"><p>Hello, very usefull information.<br>
On a my active directory the OS information of my Linux box is empty. Does it the same for you ? How can I solve that?<br>
Thanks in advanced</p></div><div class="reply">
<a rel="nofollow" class="comment-reply-link" href="https://www.rootusers.com/how-to-join-centos-linux-to-an-active-directory-domain/#comment-2737" data-commentid="2737" data-postid="3309" data-belowelement="comment-2737" data-respondelement="respond" aria-label="Reply to Gaby">Reply</a></div></div><ul class="children"><li class="comment byuser comment-author-jarrod bypostauthor odd alt depth-2" id="li-comment-2738"><div id="comment-2738"><div class="comment-author vcard">
<cite class="fn"><a href="https://www.rootusers.com/" rel="external nofollow ugc" class="url">Jarrod</a></cite>
<span class="comment-meta commentmetadata"><a href="https://www.rootusers.com/how-to-join-centos-linux-to-an-active-directory-domain/#comment-2738">March 16, 2017 at 9:39 am</a></span></div><div class="comment-text"><p>I have the same thing, I haven’t been able to find a way through SSSD to populate that field. I believe with realmd it’s possible by specifying ‘os-name’, however I was not able to get that working in my test.</p></div><div class="reply">
<a rel="nofollow" class="comment-reply-link" href="https://www.rootusers.com/how-to-join-centos-linux-to-an-active-directory-domain/#comment-2738" data-commentid="2738" data-postid="3309" data-belowelement="comment-2738" data-respondelement="respond" aria-label="Reply to Jarrod">Reply</a></div></div><ul class="children"><li class="comment even depth-3" id="li-comment-2743"><div id="comment-2743"><div class="comment-author vcard">
<cite class="fn">Gaby</cite>
<span class="comment-meta commentmetadata"><a href="https://www.rootusers.com/how-to-join-centos-linux-to-an-active-directory-domain/#comment-2743">March 20, 2017 at 10:16 pm</a></span></div><div class="comment-text"><p>Hello, for info, I find a way to do it using realmd :<br>
realm join –user=xxxx –computer-ou=OU=LinuxOS –os-name=OracleLinux –os-version=”Red Hat Enterprise Linux 7.3″<br>
now I am looking on how to update the os-version &amp; os-name fields when a linux box is already into the AD</p></div><div class="reply">
<a rel="nofollow" class="comment-reply-link" href="https://www.rootusers.com/how-to-join-centos-linux-to-an-active-directory-domain/#comment-2743" data-commentid="2743" data-postid="3309" data-belowelement="comment-2743" data-respondelement="respond" aria-label="Reply to Gaby">Reply</a></div></div><ul class="children"><li class="comment byuser comment-author-jarrod bypostauthor odd alt depth-4" id="li-comment-2744"><div id="comment-2744"><div class="comment-author vcard">
<cite class="fn"><a href="https://www.rootusers.com/" rel="external nofollow ugc" class="url">Jarrod</a></cite>
<span class="comment-meta commentmetadata"><a href="https://www.rootusers.com/how-to-join-centos-linux-to-an-active-directory-domain/#comment-2744">March 21, 2017 at 7:55 am</a></span></div><div class="comment-text"><p>Ah good to know!</p></div><div class="reply">
<a rel="nofollow" class="comment-reply-link" href="https://www.rootusers.com/how-to-join-centos-linux-to-an-active-directory-domain/#comment-2744" data-commentid="2744" data-postid="3309" data-belowelement="comment-2744" data-respondelement="respond" aria-label="Reply to Jarrod">Reply</a></div></div></li></ul></li></ul></li><li class="comment even depth-2" id="li-comment-3039"><div id="comment-3039"><div class="comment-author vcard">
<cite class="fn">t0ta11ed</cite>
<span class="comment-meta commentmetadata"><a href="https://www.rootusers.com/how-to-join-centos-linux-to-an-active-directory-domain/#comment-3039">August 18, 2017 at 5:35 am</a></span></div><div class="comment-text"><p>You can do this in AD with the Powershell command SET-ADCOMPUTER. Helpful article!</p></div><div class="reply">
<a rel="nofollow" class="comment-reply-link" href="https://www.rootusers.com/how-to-join-centos-linux-to-an-active-directory-domain/#comment-3039" data-commentid="3039" data-postid="3309" data-belowelement="comment-3039" data-respondelement="respond" aria-label="Reply to t0ta11ed">Reply</a></div></div></li></ul></li><li class="comment odd alt thread-even depth-1" id="li-comment-2759"><div id="comment-2759"><div class="comment-author vcard">
<cite class="fn">Muhammad Khan</cite>
<span class="comment-meta commentmetadata"><a href="https://www.rootusers.com/how-to-join-centos-linux-to-an-active-directory-domain/#comment-2759">March 26, 2017 at 3:17 am</a></span></div><div class="comment-text"><p>Super Article, A very convenient way of integration of Linux &amp; Windows Server. Great Job, Jarrod</p></div><div class="reply">
<a rel="nofollow" class="comment-reply-link" href="https://www.rootusers.com/how-to-join-centos-linux-to-an-active-directory-domain/#comment-2759" data-commentid="2759" data-postid="3309" data-belowelement="comment-2759" data-respondelement="respond" aria-label="Reply to Muhammad Khan">Reply</a></div></div></li><li class="comment even thread-odd thread-alt depth-1" id="li-comment-2782"><div id="comment-2782"><div class="comment-author vcard">
<cite class="fn">Steve</cite>
<span class="comment-meta commentmetadata"><a href="https://www.rootusers.com/how-to-join-centos-linux-to-an-active-directory-domain/#comment-2782">April 11, 2017 at 1:05 pm</a></span></div><div class="comment-text"><p>Does this work for:</p><p>CentOS 6x?</p><p>How about HP-UX?</p></div><div class="reply">
<a rel="nofollow" class="comment-reply-link" href="https://www.rootusers.com/how-to-join-centos-linux-to-an-active-directory-domain/#comment-2782" data-commentid="2782" data-postid="3309" data-belowelement="comment-2782" data-respondelement="respond" aria-label="Reply to Steve">Reply</a></div></div><ul class="children"><li class="comment byuser comment-author-jarrod bypostauthor odd alt depth-2" id="li-comment-2783"><div id="comment-2783"><div class="comment-author vcard">
<cite class="fn"><a href="https://www.rootusers.com/" rel="external nofollow ugc" class="url">Jarrod</a></cite>
<span class="comment-meta commentmetadata"><a href="https://www.rootusers.com/how-to-join-centos-linux-to-an-active-directory-domain/#comment-2783">April 11, 2017 at 10:35 pm</a></span></div><div class="comment-text"><p>I haven’t tested with CentOS 6, however I believe it should work. Not sure about HP-UX, I’ve never used it, sorry.</p></div><div class="reply">
<a rel="nofollow" class="comment-reply-link" href="https://www.rootusers.com/how-to-join-centos-linux-to-an-active-directory-domain/#comment-2783" data-commentid="2783" data-postid="3309" data-belowelement="comment-2783" data-respondelement="respond" aria-label="Reply to Jarrod">Reply</a></div></div><ul class="children"><li class="comment even depth-3" id="li-comment-2784"><div id="comment-2784"><div class="comment-author vcard">
<cite class="fn">Gaby</cite>
<span class="comment-meta commentmetadata"><a href="https://www.rootusers.com/how-to-join-centos-linux-to-an-active-directory-domain/#comment-2784">April 11, 2017 at 10:38 pm</a></span></div><div class="comment-text"><p>Hello,<br>
it doesn’t work on redhat/centos/oraclelinux 6. some packages are not available. Instead, use adcli package. (avalaible in Centos Mirror repo, if i remember well.)</p></div><div class="reply">
<a rel="nofollow" class="comment-reply-link" href="https://www.rootusers.com/how-to-join-centos-linux-to-an-active-directory-domain/#comment-2784" data-commentid="2784" data-postid="3309" data-belowelement="comment-2784" data-respondelement="respond" aria-label="Reply to Gaby">Reply</a></div></div><ul class="children"><li class="comment byuser comment-author-jarrod bypostauthor odd alt depth-4" id="li-comment-2786"><div id="comment-2786"><div class="comment-author vcard">
<cite class="fn"><a href="https://www.rootusers.com/" rel="external nofollow ugc" class="url">Jarrod</a></cite>
<span class="comment-meta commentmetadata"><a href="https://www.rootusers.com/how-to-join-centos-linux-to-an-active-directory-domain/#comment-2786">April 12, 2017 at 8:56 am</a></span></div><div class="comment-text"><p>Cool thanks for the tip!</p></div><div class="reply">
<a rel="nofollow" class="comment-reply-link" href="https://www.rootusers.com/how-to-join-centos-linux-to-an-active-directory-domain/#comment-2786" data-commentid="2786" data-postid="3309" data-belowelement="comment-2786" data-respondelement="respond" aria-label="Reply to Jarrod">Reply</a></div></div></li></ul></li></ul></li><li class="comment even depth-2" id="li-comment-2799"><div id="comment-2799"><div class="comment-author vcard">
<cite class="fn">Linda</cite>
<span class="comment-meta commentmetadata"><a href="https://www.rootusers.com/how-to-join-centos-linux-to-an-active-directory-domain/#comment-2799">April 25, 2017 at 6:17 pm</a></span></div><div class="comment-text"><p>worked for me with CentOs7. Thanks for a great post!</p></div><div class="reply">
<a rel="nofollow" class="comment-reply-link" href="https://www.rootusers.com/how-to-join-centos-linux-to-an-active-directory-domain/#comment-2799" data-commentid="2799" data-postid="3309" data-belowelement="comment-2799" data-respondelement="respond" aria-label="Reply to Linda">Reply</a></div></div><ul class="children"><li class="comment byuser comment-author-jarrod bypostauthor odd alt depth-3" id="li-comment-2800"><div id="comment-2800"><div class="comment-author vcard">
<cite class="fn"><a href="https://www.rootusers.com/" rel="external nofollow ugc" class="url">Jarrod</a></cite>
<span class="comment-meta commentmetadata"><a href="https://www.rootusers.com/how-to-join-centos-linux-to-an-active-directory-domain/#comment-2800">April 25, 2017 at 8:02 pm</a></span></div><div class="comment-text"><p>Good to hear :)</p></div><div class="reply">
<a rel="nofollow" class="comment-reply-link" href="https://www.rootusers.com/how-to-join-centos-linux-to-an-active-directory-domain/#comment-2800" data-commentid="2800" data-postid="3309" data-belowelement="comment-2800" data-respondelement="respond" aria-label="Reply to Jarrod">Reply</a></div></div></li></ul></li></ul></li><li class="comment even thread-even depth-1" id="li-comment-2864"><div id="comment-2864"><div class="comment-author vcard">
<cite class="fn">Rafael</cite>
<span class="comment-meta commentmetadata"><a href="https://www.rootusers.com/how-to-join-centos-linux-to-an-active-directory-domain/#comment-2864">May 18, 2017 at 5:19 am</a></span></div><div class="comment-text"><p>Great article, Jarrod. It worked perfectly for me, using CentOS 7.</p><p>Just a few comments:</p><p>– /etc/krb.conf will be /etc/krb5.conf since we’re using krb5-workstation. At first I was concerned something went wrong but then I realized is was another filename.</p><p>– I ran into some odd issues like not all users in domain being able to login, and id command not working for all users. So a colleague suggested installing winbind and it worked like a charm. My AD domain has a trust with another domain and I’m able to login with any user from both domains after installing winbind. I recommend you add it in the packages list.</p><p>– You can add Domain Admins group in sudoers so every sysadmin can login in the Linux server and elevate. I used this line/syntax:</p><p>%mydomain\\domain\ admins ALL=(ALL) ALL</p><p>Any other AD groups with spaces in the name can also be added like this, using a single dash after the word preceding the space.</p><p>– When using domains with trust, you may want to use FQDN to specify domain/user. So I can login and put in sudoers users like <a href="mailto:user1@mydomain1.com">user1@mydomain1.com</a> and <a href="mailto:user2@mydomain2.com">user2@mydomain2.com</a>. Winbind is essential for this.</p><p>Thank you very much!</p></div><div class="reply">
<a rel="nofollow" class="comment-reply-link" href="https://www.rootusers.com/how-to-join-centos-linux-to-an-active-directory-domain/#comment-2864" data-commentid="2864" data-postid="3309" data-belowelement="comment-2864" data-respondelement="respond" aria-label="Reply to Rafael">Reply</a></div></div></li><li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-2866"><div id="comment-2866"><div class="comment-author vcard">
<cite class="fn">Gab</cite>
<span class="comment-meta commentmetadata"><a href="https://www.rootusers.com/how-to-join-centos-linux-to-an-active-directory-domain/#comment-2866">May 18, 2017 at 8:10 pm</a></span></div><div class="comment-text"><p>Hello, there is a way for AD windows account to get log in over the file explorer to a specific shared folder on the linux? eg. get log in to her own $HOME on the linux from her Windows Computer?</p></div><div class="reply">
<a rel="nofollow" class="comment-reply-link" href="https://www.rootusers.com/how-to-join-centos-linux-to-an-active-directory-domain/#comment-2866" data-commentid="2866" data-postid="3309" data-belowelement="comment-2866" data-respondelement="respond" aria-label="Reply to Gab">Reply</a></div></div><ul class="children"><li class="comment byuser comment-author-jarrod bypostauthor even depth-2" id="li-comment-2867"><div id="comment-2867"><div class="comment-author vcard">
<cite class="fn"><a href="https://www.rootusers.com/" rel="external nofollow ugc" class="url">Jarrod</a></cite>
<span class="comment-meta commentmetadata"><a href="https://www.rootusers.com/how-to-join-centos-linux-to-an-active-directory-domain/#comment-2867">May 18, 2017 at 10:00 pm</a></span></div><div class="comment-text"><p>That should be possible with Samba, you can mount shared directories from either Windows or Linux and authenticate against AD.</p></div><div class="reply">
<a rel="nofollow" class="comment-reply-link" href="https://www.rootusers.com/how-to-join-centos-linux-to-an-active-directory-domain/#comment-2867" data-commentid="2867" data-postid="3309" data-belowelement="comment-2867" data-respondelement="respond" aria-label="Reply to Jarrod">Reply</a></div></div><ul class="children"><li class="comment odd alt depth-3" id="li-comment-2868"><div id="comment-2868"><div class="comment-author vcard">
<cite class="fn">Gab</cite>
<span class="comment-meta commentmetadata"><a href="https://www.rootusers.com/how-to-join-centos-linux-to-an-active-directory-domain/#comment-2868">May 18, 2017 at 10:00 pm</a></span></div><div class="comment-text"><p>Ok thanks Jarrod. Any great article to suggest? :)</p></div><div class="reply">
<a rel="nofollow" class="comment-reply-link" href="https://www.rootusers.com/how-to-join-centos-linux-to-an-active-directory-domain/#comment-2868" data-commentid="2868" data-postid="3309" data-belowelement="comment-2868" data-respondelement="respond" aria-label="Reply to Gab">Reply</a></div></div><ul class="children"><li class="comment byuser comment-author-jarrod bypostauthor even depth-4" id="li-comment-2869"><div id="comment-2869"><div class="comment-author vcard">
<cite class="fn"><a href="https://www.rootusers.com/" rel="external nofollow ugc" class="url">Jarrod</a></cite>
<span class="comment-meta commentmetadata"><a href="https://www.rootusers.com/how-to-join-centos-linux-to-an-active-directory-domain/#comment-2869">May 18, 2017 at 10:03 pm</a></span></div><div class="comment-text"><p>Nothing in particular comes to mind sorry, it’s not something I’ve personally needed to setup, I’ve just seen the options available in Samba in the past.</p></div><div class="reply">
<a rel="nofollow" class="comment-reply-link" href="https://www.rootusers.com/how-to-join-centos-linux-to-an-active-directory-domain/#comment-2869" data-commentid="2869" data-postid="3309" data-belowelement="comment-2869" data-respondelement="respond" aria-label="Reply to Jarrod">Reply</a></div></div></li></ul></li></ul></li></ul></li><li class="comment odd alt thread-even depth-1" id="li-comment-2926"><div id="comment-2926"><div class="comment-author vcard">
<cite class="fn">SAM</cite>
<span class="comment-meta commentmetadata"><a href="https://www.rootusers.com/how-to-join-centos-linux-to-an-active-directory-domain/#comment-2926">June 8, 2017 at 5:33 pm</a></span></div><div class="comment-text"><p>one of the best and easiest way to join AD.<br>
Thnx</p></div><div class="reply">
<a rel="nofollow" class="comment-reply-link" href="https://www.rootusers.com/how-to-join-centos-linux-to-an-active-directory-domain/#comment-2926" data-commentid="2926" data-postid="3309" data-belowelement="comment-2926" data-respondelement="respond" aria-label="Reply to SAM">Reply</a></div></div></li><li class="comment even thread-odd thread-alt depth-1" id="li-comment-2974"><div id="comment-2974"><div class="comment-author vcard">
<cite class="fn">netty</cite>
<span class="comment-meta commentmetadata"><a href="https://www.rootusers.com/how-to-join-centos-linux-to-an-active-directory-domain/#comment-2974">June 27, 2017 at 10:57 pm</a></span></div><div class="comment-text"><p>Thanks for this – much appreciated.</p></div><div class="reply">
<a rel="nofollow" class="comment-reply-link" href="https://www.rootusers.com/how-to-join-centos-linux-to-an-active-directory-domain/#comment-2974" data-commentid="2974" data-postid="3309" data-belowelement="comment-2974" data-respondelement="respond" aria-label="Reply to netty">Reply</a></div></div></li><li class="comment odd alt thread-even depth-1" id="li-comment-3002"><div id="comment-3002"><div class="comment-author vcard">
<cite class="fn">Pete</cite>
<span class="comment-meta commentmetadata"><a href="https://www.rootusers.com/how-to-join-centos-linux-to-an-active-directory-domain/#comment-3002">July 25, 2017 at 11:00 am</a></span></div><div class="comment-text"><p>Thank you so much for the instructions. I was able to join the domain, however, Windows domain users are not able to login to Centos, id <a href="mailto:username@domain.com">username@domain.com</a> gives error “no such user” What am I missing here?</p></div><div class="reply">
<a rel="nofollow" class="comment-reply-link" href="https://www.rootusers.com/how-to-join-centos-linux-to-an-active-directory-domain/#comment-3002" data-commentid="3002" data-postid="3309" data-belowelement="comment-3002" data-respondelement="respond" aria-label="Reply to Pete">Reply</a></div></div><ul class="children"><li class="comment byuser comment-author-jarrod bypostauthor even depth-2" id="li-comment-3003"><div id="comment-3003"><div class="comment-author vcard">
<cite class="fn"><a href="https://www.rootusers.com/" rel="external nofollow ugc" class="url">Jarrod</a></cite>
<span class="comment-meta commentmetadata"><a href="https://www.rootusers.com/how-to-join-centos-linux-to-an-active-directory-domain/#comment-3003">July 25, 2017 at 7:26 pm</a></span></div><div class="comment-text"><p>I’ve had similar before, try and clear the SSSD cache then try again: <a href="https://www.rootusers.com/how-to-clear-the-sssd-cache-in-linux/" rel="nofollow ugc">https://www.rootusers.com/how-to-clear-the-sssd-cache-in-linux/</a></p></div><div class="reply">
<a rel="nofollow" class="comment-reply-link" href="https://www.rootusers.com/how-to-join-centos-linux-to-an-active-directory-domain/#comment-3003" data-commentid="3003" data-postid="3309" data-belowelement="comment-3003" data-respondelement="respond" aria-label="Reply to Jarrod">Reply</a></div></div></li></ul></li><li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-3034"><div id="comment-3034"><div class="comment-author vcard">
<cite class="fn">Rohit</cite>
<span class="comment-meta commentmetadata"><a href="https://www.rootusers.com/how-to-join-centos-linux-to-an-active-directory-domain/#comment-3034">August 16, 2017 at 6:29 pm</a></span></div><div class="comment-text"><p>uid=1829600500(administrator@example.com) gid=1829600513<br>
UID and GId was not match with Active Directory.</p><p>How to match UID and GID with AD</p><p>Yes,<br>
i have centos 7 and i am using realm for domain join, after domain join they are showing different UID and GID, that UID and GID was not match with AD.</p></div><div class="reply">
<a rel="nofollow" class="comment-reply-link" href="https://www.rootusers.com/how-to-join-centos-linux-to-an-active-directory-domain/#comment-3034" data-commentid="3034" data-postid="3309" data-belowelement="comment-3034" data-respondelement="respond" aria-label="Reply to Rohit">Reply</a></div></div></li><li class="comment even thread-even depth-1" id="li-comment-3035"><div id="comment-3035"><div class="comment-author vcard">
<cite class="fn">PJ</cite>
<span class="comment-meta commentmetadata"><a href="https://www.rootusers.com/how-to-join-centos-linux-to-an-active-directory-domain/#comment-3035">August 17, 2017 at 12:56 am</a></span></div><div class="comment-text"><p>Nice</p></div><div class="reply">
<a rel="nofollow" class="comment-reply-link" href="https://www.rootusers.com/how-to-join-centos-linux-to-an-active-directory-domain/#comment-3035" data-commentid="3035" data-postid="3309" data-belowelement="comment-3035" data-respondelement="respond" aria-label="Reply to PJ">Reply</a></div></div></li><li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-3042"><div id="comment-3042"><div class="comment-author vcard">
<cite class="fn">goudeuk</cite>
<span class="comment-meta commentmetadata"><a href="https://www.rootusers.com/how-to-join-centos-linux-to-an-active-directory-domain/#comment-3042">August 21, 2017 at 12:24 am</a></span></div><div class="comment-text"><p>Many thanks Jarod for sharing this.<br>
Very useful.</p></div><div class="reply">
<a rel="nofollow" class="comment-reply-link" href="https://www.rootusers.com/how-to-join-centos-linux-to-an-active-directory-domain/#comment-3042" data-commentid="3042" data-postid="3309" data-belowelement="comment-3042" data-respondelement="respond" aria-label="Reply to goudeuk">Reply</a></div></div></li><li class="comment even thread-even depth-1" id="li-comment-3102"><div id="comment-3102"><div class="comment-author vcard">
<cite class="fn">zN_Ars3n</cite>
<span class="comment-meta commentmetadata"><a href="https://www.rootusers.com/how-to-join-centos-linux-to-an-active-directory-domain/#comment-3102">September 27, 2017 at 8:44 pm</a></span></div><div class="comment-text"><p>Hello Jarrod!<br>
I have an issue with adding linux to AD. I added machine to AD with domain admin credentials. When I run ‘realm list’ it shows me that my machine is in my domain but I cannot log in to the system by domain credencials. When I run ‘id <a href="mailto:admin@mydomain-com.local">admin@mydomain-com.local</a>‘ it shows me message “no such user”. I am using winbindd in this machine too and when I run ‘wbinfo -u’ it shows me all users in my domain. I cleared cache for sssd but it wont helps. Could u help with this issue?</p></div><div class="reply">
<a rel="nofollow" class="comment-reply-link" href="https://www.rootusers.com/how-to-join-centos-linux-to-an-active-directory-domain/#comment-3102" data-commentid="3102" data-postid="3309" data-belowelement="comment-3102" data-respondelement="respond" aria-label="Reply to zN_Ars3n">Reply</a></div></div><ul class="children"><li class="comment byuser comment-author-jarrod bypostauthor odd alt depth-2" id="li-comment-3103"><div id="comment-3103"><div class="comment-author vcard">
<cite class="fn"><a href="https://www.rootusers.com/" rel="external nofollow ugc" class="url">Jarrod</a></cite>
<span class="comment-meta commentmetadata"><a href="https://www.rootusers.com/how-to-join-centos-linux-to-an-active-directory-domain/#comment-3103">September 27, 2017 at 9:50 pm</a></span></div><div class="comment-text"><p>Not too sure about winbind, I haven’t personally used it, could you try changing to sssd? I believe it’s better supported.</p></div><div class="reply">
<a rel="nofollow" class="comment-reply-link" href="https://www.rootusers.com/how-to-join-centos-linux-to-an-active-directory-domain/#comment-3103" data-commentid="3103" data-postid="3309" data-belowelement="comment-3103" data-respondelement="respond" aria-label="Reply to Jarrod">Reply</a></div></div></li></ul></li><li class="comment even thread-odd thread-alt depth-1" id="li-comment-3143"><div id="comment-3143"><div class="comment-author vcard">
<cite class="fn">Mitsos</cite>
<span class="comment-meta commentmetadata"><a href="https://www.rootusers.com/how-to-join-centos-linux-to-an-active-directory-domain/#comment-3143">October 13, 2017 at 4:19 pm</a></span></div><div class="comment-text"><p>Great article !!!<br>
In order to get Operating System info on Active Directory Users &amp; Computers, on a Centos 7 machine you can create a /etc/realmd.conf file and the following data:</p><p>[active-directory]<br>
os-name = Linux<br>
os-version = CentOS 7</p><p>[service]<br>
automatic-install = yes</p><p>The problem that I am facing is that when I run:<br>
#getent passwd<br>
I do not get any AD accounts, contrary when running id , I get all the info. More over, when I run wbinfo -u, I get errors (I suppose that’s my mistake cos winbind does not work with sssd).</p></div><div class="reply">
<a rel="nofollow" class="comment-reply-link" href="https://www.rootusers.com/how-to-join-centos-linux-to-an-active-directory-domain/#comment-3143" data-commentid="3143" data-postid="3309" data-belowelement="comment-3143" data-respondelement="respond" aria-label="Reply to Mitsos">Reply</a></div></div></li><li class="comment odd alt thread-even depth-1" id="li-comment-3165"><div id="comment-3165"><div class="comment-author vcard">
<cite class="fn">Gab</cite>
<span class="comment-meta commentmetadata"><a href="https://www.rootusers.com/how-to-join-centos-linux-to-an-active-directory-domain/#comment-3165">October 25, 2017 at 9:33 pm</a></span></div><div class="comment-text"><p>hello, in my company we have around 100 domain controller all around the world. often when I join a server to the Active Directory Domain, the server never choose the closest DC (same subnet for example).</p><p>Is there a way to fix one or 2 DC to contact?<br>
Thanks.</p></div><div class="reply">
<a rel="nofollow" class="comment-reply-link" href="https://www.rootusers.com/how-to-join-centos-linux-to-an-active-directory-domain/#comment-3165" data-commentid="3165" data-postid="3309" data-belowelement="comment-3165" data-respondelement="respond" aria-label="Reply to Gab">Reply</a></div></div></li><li class="comment even thread-odd thread-alt depth-1" id="li-comment-3166"><div id="comment-3166"><div class="comment-author vcard">
<cite class="fn">Gab</cite>
<span class="comment-meta commentmetadata"><a href="https://www.rootusers.com/how-to-join-centos-linux-to-an-active-directory-domain/#comment-3166">October 25, 2017 at 11:01 pm</a></span></div><div class="comment-text"><p>Hello,</p><p>do you know how to fix sssd to contact only 1 or 2 dc instead of to contact one randomly?</p><p>Regards</p></div><div class="reply">
<a rel="nofollow" class="comment-reply-link" href="https://www.rootusers.com/how-to-join-centos-linux-to-an-active-directory-domain/#comment-3166" data-commentid="3166" data-postid="3309" data-belowelement="comment-3166" data-respondelement="respond" aria-label="Reply to Gab">Reply</a></div></div></li><li class="comment odd alt thread-even depth-1" id="li-comment-3190"><div id="comment-3190"><div class="comment-author vcard">
<cite class="fn">Roger</cite>
<span class="comment-meta commentmetadata"><a href="https://www.rootusers.com/how-to-join-centos-linux-to-an-active-directory-domain/#comment-3190">November 6, 2017 at 6:48 pm</a></span></div><div class="comment-text"><p>Is Active Directory 2016 (Domain Functional Level 2016) also supported with CentOS 6 / 7?</p><p>Thank you for your reply</p></div><div class="reply">
<a rel="nofollow" class="comment-reply-link" href="https://www.rootusers.com/how-to-join-centos-linux-to-an-active-directory-domain/#comment-3190" data-commentid="3190" data-postid="3309" data-belowelement="comment-3190" data-respondelement="respond" aria-label="Reply to Roger">Reply</a></div></div><ul class="children"><li class="comment byuser comment-author-jarrod bypostauthor even depth-2" id="li-comment-3191"><div id="comment-3191"><div class="comment-author vcard">
<cite class="fn"><a href="https://www.rootusers.com/" rel="external nofollow ugc" class="url">Jarrod</a></cite>
<span class="comment-meta commentmetadata"><a href="https://www.rootusers.com/how-to-join-centos-linux-to-an-active-directory-domain/#comment-3191">November 6, 2017 at 6:50 pm</a></span></div><div class="comment-text"><p>I haven’t tested it, but I don’t see why it wouldn’t be.</p></div><div class="reply">
<a rel="nofollow" class="comment-reply-link" href="https://www.rootusers.com/how-to-join-centos-linux-to-an-active-directory-domain/#comment-3191" data-commentid="3191" data-postid="3309" data-belowelement="comment-3191" data-respondelement="respond" aria-label="Reply to Jarrod">Reply</a></div></div></li></ul></li><li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-3238"><div id="comment-3238"><div class="comment-author vcard">
<cite class="fn"><a href="http://www.bluesandcompany.com/" rel="external nofollow ugc" class="url">Jeff Gover</a></cite>
<span class="comment-meta commentmetadata"><a href="https://www.rootusers.com/how-to-join-centos-linux-to-an-active-directory-domain/#comment-3238">December 6, 2017 at 6:50 am</a></span></div><div class="comment-text"><p>Thanks Jarrod, going forward via LDAP and AD I think you have no choice plus IMHO this is a better option as it’s just like joining a Windows and Apple(still MAC is problematic) machine to the Domain.<br>
The Why not to go forward with LDAP<br>
Clarification regarding the status of Identity Management for Unix (IDMU) &amp; NIS Server Role in Windows Server 2016 Technical Preview and beyond<br>
<a href="https://blogs.technet.microsoft.com/activedirectoryua/2016/02/09/identity-management-for-unix-idmu-is-deprecated-in-windows-server/" rel="nofollow ugc">https://blogs.technet.microsoft.com/activedirectoryua/2016/02/09/identity-management-for-unix-idmu-is-deprecated-in-windows-server/</a></p></div><div class="reply">
<a rel="nofollow" class="comment-reply-link" href="https://www.rootusers.com/how-to-join-centos-linux-to-an-active-directory-domain/#comment-3238" data-commentid="3238" data-postid="3309" data-belowelement="comment-3238" data-respondelement="respond" aria-label="Reply to Jeff Gover">Reply</a></div></div></li><li class="comment even thread-even depth-1" id="li-comment-3280"><div id="comment-3280"><div class="comment-author vcard">
<cite class="fn">S N B</cite>
<span class="comment-meta commentmetadata"><a href="https://www.rootusers.com/how-to-join-centos-linux-to-an-active-directory-domain/#comment-3280">December 22, 2017 at 1:23 am</a></span></div><div class="comment-text"><p>We are really looking forward for any such article as mentioned by Gab May 18, 2017 at 8:10 pm</p></div><div class="reply">
<a rel="nofollow" class="comment-reply-link" href="https://www.rootusers.com/how-to-join-centos-linux-to-an-active-directory-domain/#comment-3280" data-commentid="3280" data-postid="3309" data-belowelement="comment-3280" data-respondelement="respond" aria-label="Reply to S N B">Reply</a></div></div></li><li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-3302"><div id="comment-3302"><div class="comment-author vcard">
<cite class="fn">J T</cite>
<span class="comment-meta commentmetadata"><a href="https://www.rootusers.com/how-to-join-centos-linux-to-an-active-directory-domain/#comment-3302">January 11, 2018 at 3:47 am</a></span></div><div class="comment-text"><p>Amazing. Thank you so much for this. Exactly what I was looking for.</p><p><b>A note for anyone using Hyper-V:</b> Make sure you set up a Virtual Switch to be used by both the CentOS VM and the Windows Server VM. Set the Windows server VM’s adapter to a static IP, and CentOS 7 VM’s adapter to an IP in the same subnet. (In my case it was “Ethernet 2” and “eth1”, respectively for the adapters.) When you’ve done that, simply use the command <code>hostname {name}@{domain controller}</code> to set the hostname of the CentOS7 VM before running the <code>realm join</code> command.</p></div><div class="reply">
<a rel="nofollow" class="comment-reply-link" href="https://www.rootusers.com/how-to-join-centos-linux-to-an-active-directory-domain/#comment-3302" data-commentid="3302" data-postid="3309" data-belowelement="comment-3302" data-respondelement="respond" aria-label="Reply to J T">Reply</a></div></div></li><li class="comment even thread-even depth-1" id="li-comment-3310"><div id="comment-3310"><div class="comment-author vcard">
<cite class="fn">Zombie</cite>
<span class="comment-meta commentmetadata"><a href="https://www.rootusers.com/how-to-join-centos-linux-to-an-active-directory-domain/#comment-3310">January 14, 2018 at 12:36 am</a></span></div><div class="comment-text"><p>Hi, how can you restrict permission for an AD user in linux (Centos7), for a firebird database? (in order to deny the extraction of the complete database file, I would like to only allow the user to read/write to the database. Can you please help me?</p></div><div class="reply">
<a rel="nofollow" class="comment-reply-link" href="https://www.rootusers.com/how-to-join-centos-linux-to-an-active-directory-domain/#comment-3310" data-commentid="3310" data-postid="3309" data-belowelement="comment-3310" data-respondelement="respond" aria-label="Reply to Zombie">Reply</a></div></div></li><li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-3316"><div id="comment-3316"><div class="comment-author vcard">
<cite class="fn">vibe</cite>
<span class="comment-meta commentmetadata"><a href="https://www.rootusers.com/how-to-join-centos-linux-to-an-active-directory-domain/#comment-3316">January 17, 2018 at 5:19 am</a></span></div><div class="comment-text"><p>Using CentOS 7, following these instructions to the T but am having problems with giving users sudo rights.</p><p>created computer object linux in AD<br>
changed hostname of computer to linux<br>
realm join –user=admin domain.com<br>
realm list shows domain info<br>
modified sssd.conf for home directory and fqdn<br>
restarted sssd<br>
created AD group – sudoers<br>
created user1 in AD<br>
added user1 to group sudoers<br>
modified /etc/sudoers.d/sudoers to contain %sudoers ALL=(ALL) ALL<br>
ssh user1@localhost<br>
sudo -i returns user not in sudoers file</p><p>What am I missing?</p></div><div class="reply">
<a rel="nofollow" class="comment-reply-link" href="https://www.rootusers.com/how-to-join-centos-linux-to-an-active-directory-domain/#comment-3316" data-commentid="3316" data-postid="3309" data-belowelement="comment-3316" data-respondelement="respond" aria-label="Reply to vibe">Reply</a></div></div><ul class="children"><li class="comment byuser comment-author-jarrod bypostauthor even depth-2" id="li-comment-3317"><div id="comment-3317"><div class="comment-author vcard">
<cite class="fn"><a href="https://www.rootusers.com/" rel="external nofollow ugc" class="url">Jarrod</a></cite>
<span class="comment-meta commentmetadata"><a href="https://www.rootusers.com/how-to-join-centos-linux-to-an-active-directory-domain/#comment-3317">January 17, 2018 at 7:11 am</a></span></div><div class="comment-text"><p>Does the Linux system see the group you made in AD?</p></div><div class="reply">
<a rel="nofollow" class="comment-reply-link" href="https://www.rootusers.com/how-to-join-centos-linux-to-an-active-directory-domain/#comment-3317" data-commentid="3317" data-postid="3309" data-belowelement="comment-3317" data-respondelement="respond" aria-label="Reply to Jarrod">Reply</a></div></div></li></ul></li><li class="comment odd alt thread-even depth-1" id="li-comment-3318"><div id="comment-3318"><div class="comment-author vcard">
<cite class="fn">vibe</cite>
<span class="comment-meta commentmetadata"><a href="https://www.rootusers.com/how-to-join-centos-linux-to-an-active-directory-domain/#comment-3318">January 17, 2018 at 7:21 am</a></span></div><div class="comment-text"><p>Hi Jarrod,</p><p>id user1<br>
uid=xxxxxxxxx(ykroot) gid=xxxxxxxxxx(domain users) groups=xxxxxxxxxx(domain users)</p><p>Doesn’t see the account is a member of the sudoers group. Tried logging off and rebooting. No luck. Any suggestions?</p></div><div class="reply">
<a rel="nofollow" class="comment-reply-link" href="https://www.rootusers.com/how-to-join-centos-linux-to-an-active-directory-domain/#comment-3318" data-commentid="3318" data-postid="3309" data-belowelement="comment-3318" data-respondelement="respond" aria-label="Reply to vibe">Reply</a></div></div><ul class="children"><li class="comment byuser comment-author-jarrod bypostauthor even depth-2" id="li-comment-3323"><div id="comment-3323"><div class="comment-author vcard">
<cite class="fn"><a href="https://www.rootusers.com/" rel="external nofollow ugc" class="url">Jarrod</a></cite>
<span class="comment-meta commentmetadata"><a href="https://www.rootusers.com/how-to-join-centos-linux-to-an-active-directory-domain/#comment-3323">January 17, 2018 at 9:39 am</a></span></div><div class="comment-text"><p>I’m not sure if rebooting clears the SSSD cache, I’d try clearing that first then seeing if the group becomes recognized.</p><p>I’ve written about this here: <a href="https://www.rootusers.com/how-to-clear-the-sssd-cache-in-linux/" rel="nofollow ugc">https://www.rootusers.com/how-to-clear-the-sssd-cache-in-linux/</a></p></div><div class="reply">
<a rel="nofollow" class="comment-reply-link" href="https://www.rootusers.com/how-to-join-centos-linux-to-an-active-directory-domain/#comment-3323" data-commentid="3323" data-postid="3309" data-belowelement="comment-3323" data-respondelement="respond" aria-label="Reply to Jarrod">Reply</a></div></div><ul class="children"><li class="comment odd alt depth-3" id="li-comment-3344"><div id="comment-3344"><div class="comment-author vcard">
<cite class="fn">vibe</cite>
<span class="comment-meta commentmetadata"><a href="https://www.rootusers.com/how-to-join-centos-linux-to-an-active-directory-domain/#comment-3344">January 24, 2018 at 5:56 am</a></span></div><div class="comment-text"><p>I’ve followed the steps to clear the cache and deleted the files in the db folder but the problem remains. Binding the system with winbind shows all group memberships where realm only lists domain users. Could there be an issue, some config that needs changing on the AD server that’s causing this?</p></div><div class="reply">
<a rel="nofollow" class="comment-reply-link" href="https://www.rootusers.com/how-to-join-centos-linux-to-an-active-directory-domain/#comment-3344" data-commentid="3344" data-postid="3309" data-belowelement="comment-3344" data-respondelement="respond" aria-label="Reply to vibe">Reply</a></div></div><ul class="children"><li class="comment byuser comment-author-jarrod bypostauthor even depth-4" id="li-comment-3345"><div id="comment-3345"><div class="comment-author vcard">
<cite class="fn"><a href="https://www.rootusers.com/" rel="external nofollow ugc" class="url">Jarrod</a></cite>
<span class="comment-meta commentmetadata"><a href="https://www.rootusers.com/how-to-join-centos-linux-to-an-active-directory-domain/#comment-3345">January 24, 2018 at 5:44 pm</a></span></div><div class="comment-text"><p>Perhaps, I forget the specifics, but on the group in AD you might need to go to the Unix tab and set a GID, or something similar, I’ve done that for users before to set a UID in AD, you need to install something in server manager for those GUI options to show up in AD.</p></div><div class="reply">
<a rel="nofollow" class="comment-reply-link" href="https://www.rootusers.com/how-to-join-centos-linux-to-an-active-directory-domain/#comment-3345" data-commentid="3345" data-postid="3309" data-belowelement="comment-3345" data-respondelement="respond" aria-label="Reply to Jarrod">Reply</a></div></div><ul class="children"><li class="comment odd alt depth-5" id="li-comment-3366"><div id="comment-3366"><div class="comment-author vcard">
<cite class="fn">vibe</cite>
<span class="comment-meta commentmetadata"><a href="https://www.rootusers.com/how-to-join-centos-linux-to-an-active-directory-domain/#comment-3366">February 1, 2018 at 5:58 am</a></span></div><div class="comment-text"><p>The fix for this was indeed in AD. In the security tab, for authenticated users, “read remote access information” has to be checked in order to read group membership.</p></div><div class="reply"></div></div></li><li class="comment byuser comment-author-jarrod bypostauthor even depth-5" id="li-comment-3368"><div id="comment-3368"><div class="comment-author vcard">
<cite class="fn"><a href="https://www.rootusers.com/" rel="external nofollow ugc" class="url">Jarrod</a></cite>
<span class="comment-meta commentmetadata"><a href="https://www.rootusers.com/how-to-join-centos-linux-to-an-active-directory-domain/#comment-3368">February 1, 2018 at 9:19 am</a></span></div><div class="comment-text"><p>Good to know!</p></div><div class="reply"></div></div></li></ul></li><li class="comment odd alt depth-4" id="li-comment-4052"><div id="comment-4052"><div class="comment-author vcard">
<cite class="fn">DelfrCorp</cite>
<span class="comment-meta commentmetadata"><a href="https://www.rootusers.com/how-to-join-centos-linux-to-an-active-directory-domain/#comment-4052">November 8, 2018 at 9:25 am</a></span></div><div class="comment-text"><p>Which object, group or container did you grant the “read remote access information” permissions to? I’m digging around in my AD settings and can’t those permissions anywhere.</p></div><div class="reply">
<a rel="nofollow" class="comment-reply-link" href="https://www.rootusers.com/how-to-join-centos-linux-to-an-active-directory-domain/#comment-4052" data-commentid="4052" data-postid="3309" data-belowelement="comment-4052" data-respondelement="respond" aria-label="Reply to DelfrCorp">Reply</a></div></div></li></ul></li></ul></li></ul></li><li class="comment even thread-odd thread-alt depth-1" id="li-comment-3322"><div id="comment-3322"><div class="comment-author vcard">
<cite class="fn">vibe</cite>
<span class="comment-meta commentmetadata"><a href="https://www.rootusers.com/how-to-join-centos-linux-to-an-active-directory-domain/#comment-3322">January 17, 2018 at 9:13 am</a></span></div><div class="comment-text"><p>Another issue while testing.</p><p>I tried leaving domain.com with “realm leave” then joining newdomain.com with the same steps and got the following:</p><p>Failed to join domain: User specified does not have administrator privileges<br>
! Insufficient permissions to join the domain newdomain.com</p><p>The DCs are identical vms. Just named differently for the purpose of joining, leaving then joining a new domain. I can still join the original domain.com.</p><p>Things I’ve tried:</p><p>sss_cache -E<br>
clearing entries for domain.com in /var/lib/sss/…/…</p><p>Is there the proper way to leave a domain so the system would be ready to join another?</p></div><div class="reply">
<a rel="nofollow" class="comment-reply-link" href="https://www.rootusers.com/how-to-join-centos-linux-to-an-active-directory-domain/#comment-3322" data-commentid="3322" data-postid="3309" data-belowelement="comment-3322" data-respondelement="respond" aria-label="Reply to vibe">Reply</a></div></div><ul class="children"><li class="comment byuser comment-author-jarrod bypostauthor odd alt depth-2" id="li-comment-3324"><div id="comment-3324"><div class="comment-author vcard">
<cite class="fn"><a href="https://www.rootusers.com/" rel="external nofollow ugc" class="url">Jarrod</a></cite>
<span class="comment-meta commentmetadata"><a href="https://www.rootusers.com/how-to-join-centos-linux-to-an-active-directory-domain/#comment-3324">January 17, 2018 at 9:41 am</a></span></div><div class="comment-text"><p>Not too sure why that doesn’t work properly, I’ve always used realm leave to leave the domain then rejoining worked without any problems. It could be possible that there is some old config somewhere, so you could try reinstall all the packages fresh using yum (I think there is an option to reinstall with fresh config files rather than leaving defaults).</p></div><div class="reply">
<a rel="nofollow" class="comment-reply-link" href="https://www.rootusers.com/how-to-join-centos-linux-to-an-active-directory-domain/#comment-3324" data-commentid="3324" data-postid="3309" data-belowelement="comment-3324" data-respondelement="respond" aria-label="Reply to Jarrod">Reply</a></div></div><ul class="children"><li class="comment even depth-3" id="li-comment-3367"><div id="comment-3367"><div class="comment-author vcard">
<cite class="fn">vibe</cite>
<span class="comment-meta commentmetadata"><a href="https://www.rootusers.com/how-to-join-centos-linux-to-an-active-directory-domain/#comment-3367">February 1, 2018 at 6:00 am</a></span></div><div class="comment-text"><p>realm leave doesn’t clear out krb5.conf. it has to be modified if you need to bind the system to another domain.</p></div><div class="reply">
<a rel="nofollow" class="comment-reply-link" href="https://www.rootusers.com/how-to-join-centos-linux-to-an-active-directory-domain/#comment-3367" data-commentid="3367" data-postid="3309" data-belowelement="comment-3367" data-respondelement="respond" aria-label="Reply to vibe">Reply</a></div></div></li></ul></li></ul></li><li class="comment odd alt thread-even depth-1" id="li-comment-3360"><div id="comment-3360"><div class="comment-author vcard">
<cite class="fn">Vj</cite>
<span class="comment-meta commentmetadata"><a href="https://www.rootusers.com/how-to-join-centos-linux-to-an-active-directory-domain/#comment-3360">January 31, 2018 at 1:09 pm</a></span></div><div class="comment-text"><p>I was able to configure AD on centOS 6 without using realm join, I did,<br>
1. install nss-pam-ldapd<br>
2. ensure nsswitch.conf entries point to files and ldap.<br>
3. Updated /etc/pam.d/system-auth-ac and /etc/pam.d/password-auth-ac<br>
4. updated /etc/nsclcd.conf and /etc/pam_ldap.conf files with bind user and password..<br>
5. Ensure certs are at /etc/openldap/cacerts<br>
6. restarted nscd and nslcd.</p><p>This worked on centOS 6 but not 7.</p><p>Can we do similar approach on 7, if so, what I am I missing ?</p></div><div class="reply">
<a rel="nofollow" class="comment-reply-link" href="https://www.rootusers.com/how-to-join-centos-linux-to-an-active-directory-domain/#comment-3360" data-commentid="3360" data-postid="3309" data-belowelement="comment-3360" data-respondelement="respond" aria-label="Reply to Vj">Reply</a></div></div><ul class="children"><li class="comment even depth-2" id="li-comment-3880"><div id="comment-3880"><div class="comment-author vcard">
<cite class="fn">CD</cite>
<span class="comment-meta commentmetadata"><a href="https://www.rootusers.com/how-to-join-centos-linux-to-an-active-directory-domain/#comment-3880">July 23, 2018 at 11:47 pm</a></span></div><div class="comment-text"><p>Can you please let me know the steps all you followed to Join CentOS 6.5 in Windows domain. I am having issue with CentOS 6.5 while joining to domain.</p></div><div class="reply">
<a rel="nofollow" class="comment-reply-link" href="https://www.rootusers.com/how-to-join-centos-linux-to-an-active-directory-domain/#comment-3880" data-commentid="3880" data-postid="3309" data-belowelement="comment-3880" data-respondelement="respond" aria-label="Reply to CD">Reply</a></div></div></li></ul></li><li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-3386"><div id="comment-3386"><div class="comment-author vcard">
<cite class="fn">reena</cite>
<span class="comment-meta commentmetadata"><a href="https://www.rootusers.com/how-to-join-centos-linux-to-an-active-directory-domain/#comment-3386">February 10, 2018 at 1:14 am</a></span></div><div class="comment-text"><p>I have successfully gotten centos linux joined to Simple AD in AWS, however i am now experiencing an issue with the truncating of netbios name in AD. Any assitance would be helpful and let me know if any additonal ifo is needed to help solve this.</p></div><div class="reply">
<a rel="nofollow" class="comment-reply-link" href="https://www.rootusers.com/how-to-join-centos-linux-to-an-active-directory-domain/#comment-3386" data-commentid="3386" data-postid="3309" data-belowelement="comment-3386" data-respondelement="respond" aria-label="Reply to reena">Reply</a></div></div><ul class="children"><li class="comment byuser comment-author-jarrod bypostauthor even depth-2" id="li-comment-3388"><div id="comment-3388"><div class="comment-author vcard">
<cite class="fn"><a href="https://www.rootusers.com/" rel="external nofollow ugc" class="url">Jarrod</a></cite>
<span class="comment-meta commentmetadata"><a href="https://www.rootusers.com/how-to-join-centos-linux-to-an-active-directory-domain/#comment-3388">February 10, 2018 at 9:15 am</a></span></div><div class="comment-text"><p>What is it truncating to? By default Netbios will truncate to 15 characters as that’s how it works.</p></div><div class="reply">
<a rel="nofollow" class="comment-reply-link" href="https://www.rootusers.com/how-to-join-centos-linux-to-an-active-directory-domain/#comment-3388" data-commentid="3388" data-postid="3309" data-belowelement="comment-3388" data-respondelement="respond" aria-label="Reply to Jarrod">Reply</a></div></div></li></ul></li><li class="comment odd alt thread-even depth-1" id="li-comment-3392"><div id="comment-3392"><div class="comment-author vcard">
<cite class="fn">Wael Salah</cite>
<span class="comment-meta commentmetadata"><a href="https://www.rootusers.com/how-to-join-centos-linux-to-an-active-directory-domain/#comment-3392">February 15, 2018 at 3:32 am</a></span></div><div class="comment-text"><p>many thank,<br>
very useful.</p></div><div class="reply">
<a rel="nofollow" class="comment-reply-link" href="https://www.rootusers.com/how-to-join-centos-linux-to-an-active-directory-domain/#comment-3392" data-commentid="3392" data-postid="3309" data-belowelement="comment-3392" data-respondelement="respond" aria-label="Reply to Wael Salah">Reply</a></div></div></li><li class="comment even thread-odd thread-alt depth-1" id="li-comment-3393"><div id="comment-3393"><div class="comment-author vcard">
<cite class="fn">Wael Salah</cite>
<span class="comment-meta commentmetadata"><a href="https://www.rootusers.com/how-to-join-centos-linux-to-an-active-directory-domain/#comment-3393">February 15, 2018 at 4:12 am</a></span></div><div class="comment-text"><p>the final step: :)</p><p>[root@CentOS7 ~]# vi /etc/sssd/sssd.conf<br>
[root@CentOS7 ~]# id test<br>
id: test: no such user<br>
[root@CentOS7 ~]# systemctl restart sssd<br>
[root@CentOS7 ~]# id test<br>
uid=1469601109(test) gid=1469600513(domain users) groups=1469600513(domain users)</p><p>Thanks again</p></div><div class="reply">
<a rel="nofollow" class="comment-reply-link" href="https://www.rootusers.com/how-to-join-centos-linux-to-an-active-directory-domain/#comment-3393" data-commentid="3393" data-postid="3309" data-belowelement="comment-3393" data-respondelement="respond" aria-label="Reply to Wael Salah">Reply</a></div></div><ul class="children"><li class="comment odd alt depth-2" id="li-comment-3405"><div id="comment-3405"><div class="comment-author vcard">
<cite class="fn">vibe</cite>
<span class="comment-meta commentmetadata"><a href="https://www.rootusers.com/how-to-join-centos-linux-to-an-active-directory-domain/#comment-3405">February 24, 2018 at 3:56 am</a></span></div><div class="comment-text"><p>add the user to an AD group and perform id again. does the group membership show?</p></div><div class="reply">
<a rel="nofollow" class="comment-reply-link" href="https://www.rootusers.com/how-to-join-centos-linux-to-an-active-directory-domain/#comment-3405" data-commentid="3405" data-postid="3309" data-belowelement="comment-3405" data-respondelement="respond" aria-label="Reply to vibe">Reply</a></div></div></li></ul></li><li class="comment even thread-even depth-1" id="li-comment-3394"><div id="comment-3394"><div class="comment-author vcard">
<cite class="fn">Wael Salah</cite>
<span class="comment-meta commentmetadata"><a href="https://www.rootusers.com/how-to-join-centos-linux-to-an-active-directory-domain/#comment-3394">February 15, 2018 at 4:32 am</a></span></div><div class="comment-text"><p>I used VMware, Bridget network.<br>
it worked smoothly fine.</p></div><div class="reply">
<a rel="nofollow" class="comment-reply-link" href="https://www.rootusers.com/how-to-join-centos-linux-to-an-active-directory-domain/#comment-3394" data-commentid="3394" data-postid="3309" data-belowelement="comment-3394" data-respondelement="respond" aria-label="Reply to Wael Salah">Reply</a></div></div></li><li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-3412"><div id="comment-3412"><div class="comment-author vcard">
<cite class="fn">gil</cite>
<span class="comment-meta commentmetadata"><a href="https://www.rootusers.com/how-to-join-centos-linux-to-an-active-directory-domain/#comment-3412">March 1, 2018 at 11:35 pm</a></span></div><div class="comment-text"><p>Great guide!<br>
Only thing missing is winbind.<br>
Install it from the package manager, no need for further configuration and it’ll work.</p></div><div class="reply">
<a rel="nofollow" class="comment-reply-link" href="https://www.rootusers.com/how-to-join-centos-linux-to-an-active-directory-domain/#comment-3412" data-commentid="3412" data-postid="3309" data-belowelement="comment-3412" data-respondelement="respond" aria-label="Reply to gil">Reply</a></div></div><ul class="children"><li class="comment byuser comment-author-jarrod bypostauthor even depth-2" id="li-comment-3413"><div id="comment-3413"><div class="comment-author vcard">
<cite class="fn"><a href="https://www.rootusers.com/" rel="external nofollow ugc" class="url">Jarrod</a></cite>
<span class="comment-meta commentmetadata"><a href="https://www.rootusers.com/how-to-join-centos-linux-to-an-active-directory-domain/#comment-3413">March 2, 2018 at 7:00 pm</a></span></div><div class="comment-text"><p>I intentionally didn’t include it because I’ve had some serious problems with it in the past compared to SSSD.</p></div><div class="reply">
<a rel="nofollow" class="comment-reply-link" href="https://www.rootusers.com/how-to-join-centos-linux-to-an-active-directory-domain/#comment-3413" data-commentid="3413" data-postid="3309" data-belowelement="comment-3413" data-respondelement="respond" aria-label="Reply to Jarrod">Reply</a></div></div></li></ul></li><li class="comment odd alt thread-even depth-1" id="li-comment-3434"><div id="comment-3434"><div class="comment-author vcard">
<cite class="fn"><a href="http://www.opsdev.com.br/" rel="external nofollow ugc" class="url">Fabio</a></cite>
<span class="comment-meta commentmetadata"><a href="https://www.rootusers.com/how-to-join-centos-linux-to-an-active-directory-domain/#comment-3434">March 18, 2018 at 11:21 am</a></span></div><div class="comment-text"><p>Great! Many thanks</p></div><div class="reply">
<a rel="nofollow" class="comment-reply-link" href="https://www.rootusers.com/how-to-join-centos-linux-to-an-active-directory-domain/#comment-3434" data-commentid="3434" data-postid="3309" data-belowelement="comment-3434" data-respondelement="respond" aria-label="Reply to Fabio">Reply</a></div></div></li><li class="comment even thread-odd thread-alt depth-1" id="li-comment-3453"><div id="comment-3453"><div class="comment-author vcard">
<cite class="fn">vibe</cite>
<span class="comment-meta commentmetadata"><a href="https://www.rootusers.com/how-to-join-centos-linux-to-an-active-directory-domain/#comment-3453">March 27, 2018 at 9:55 am</a></span></div><div class="comment-text"><p>Is there an Ubuntu tut? This worked great for CentOS. Using the same DC, I tried binding Ubuntu using another tut with no success. I’m able to bind but can’t look up an AD User.</p></div><div class="reply">
<a rel="nofollow" class="comment-reply-link" href="https://www.rootusers.com/how-to-join-centos-linux-to-an-active-directory-domain/#comment-3453" data-commentid="3453" data-postid="3309" data-belowelement="comment-3453" data-respondelement="respond" aria-label="Reply to vibe">Reply</a></div></div><ul class="children"><li class="comment byuser comment-author-jarrod bypostauthor odd alt depth-2" id="li-comment-3454"><div id="comment-3454"><div class="comment-author vcard">
<cite class="fn"><a href="https://www.rootusers.com/" rel="external nofollow ugc" class="url">Jarrod</a></cite>
<span class="comment-meta commentmetadata"><a href="https://www.rootusers.com/how-to-join-centos-linux-to-an-active-directory-domain/#comment-3454">March 27, 2018 at 5:47 pm</a></span></div><div class="comment-text"><p>I don’t personally have any experience trying with a Debian based system.</p></div><div class="reply">
<a rel="nofollow" class="comment-reply-link" href="https://www.rootusers.com/how-to-join-centos-linux-to-an-active-directory-domain/#comment-3454" data-commentid="3454" data-postid="3309" data-belowelement="comment-3454" data-respondelement="respond" aria-label="Reply to Jarrod">Reply</a></div></div></li></ul></li><li class="comment even thread-even depth-1" id="li-comment-3478"><div id="comment-3478"><div class="comment-author vcard">
<cite class="fn">Gopi L</cite>
<span class="comment-meta commentmetadata"><a href="https://www.rootusers.com/how-to-join-centos-linux-to-an-active-directory-domain/#comment-3478">April 5, 2018 at 5:57 pm</a></span></div><div class="comment-text"><p>its works well sir , but i created some users without password in windows AD but i couldn’t authenticate that users. Help me to authenticate user account without passwords.</p></div><div class="reply">
<a rel="nofollow" class="comment-reply-link" href="https://www.rootusers.com/how-to-join-centos-linux-to-an-active-directory-domain/#comment-3478" data-commentid="3478" data-postid="3309" data-belowelement="comment-3478" data-respondelement="respond" aria-label="Reply to Gopi L">Reply</a></div></div><ul class="children"><li class="comment odd alt depth-2" id="li-comment-3480"><div id="comment-3480"><div class="comment-author vcard">
<cite class="fn">vibe</cite>
<span class="comment-meta commentmetadata"><a href="https://www.rootusers.com/how-to-join-centos-linux-to-an-active-directory-domain/#comment-3480">April 6, 2018 at 1:48 am</a></span></div><div class="comment-text"><p>Are you able to login to a windows machine joined to the domain with the account without a pw?</p></div><div class="reply">
<a rel="nofollow" class="comment-reply-link" href="https://www.rootusers.com/how-to-join-centos-linux-to-an-active-directory-domain/#comment-3480" data-commentid="3480" data-postid="3309" data-belowelement="comment-3480" data-respondelement="respond" aria-label="Reply to vibe">Reply</a></div></div></li></ul></li><li class="comment even thread-odd thread-alt depth-1" id="li-comment-3495"><div id="comment-3495"><div class="comment-author vcard">
<cite class="fn">daniel</cite>
<span class="comment-meta commentmetadata"><a href="https://www.rootusers.com/how-to-join-centos-linux-to-an-active-directory-domain/#comment-3495">April 16, 2018 at 4:34 pm</a></span></div><div class="comment-text"><p>im not able to login with my ad user credentials , realm join is successful</p></div><div class="reply">
<a rel="nofollow" class="comment-reply-link" href="https://www.rootusers.com/how-to-join-centos-linux-to-an-active-directory-domain/#comment-3495" data-commentid="3495" data-postid="3309" data-belowelement="comment-3495" data-respondelement="respond" aria-label="Reply to daniel">Reply</a></div></div><ul class="children"><li class="comment byuser comment-author-jarrod bypostauthor odd alt depth-2" id="li-comment-3496"><div id="comment-3496"><div class="comment-author vcard">
<cite class="fn"><a href="https://www.rootusers.com/" rel="external nofollow ugc" class="url">Jarrod</a></cite>
<span class="comment-meta commentmetadata"><a href="https://www.rootusers.com/how-to-join-centos-linux-to-an-active-directory-domain/#comment-3496">April 16, 2018 at 6:49 pm</a></span></div><div class="comment-text"><p>What happens if you do ‘id username’, does it show the AD user information? Has AD been configured to support Linux?</p></div><div class="reply">
<a rel="nofollow" class="comment-reply-link" href="https://www.rootusers.com/how-to-join-centos-linux-to-an-active-directory-domain/#comment-3496" data-commentid="3496" data-postid="3309" data-belowelement="comment-3496" data-respondelement="respond" aria-label="Reply to Jarrod">Reply</a></div></div><ul class="children"><li class="comment even depth-3" id="li-comment-3521"><div id="comment-3521"><div class="comment-author vcard">
<cite class="fn">daniel</cite>
<span class="comment-meta commentmetadata"><a href="https://www.rootusers.com/how-to-join-centos-linux-to-an-active-directory-domain/#comment-3521">April 30, 2018 at 7:23 pm</a></span></div><div class="comment-text"><p>i was able to join and login with ubuntu vm .<br>
for centos im not able to login<br>
id command shows all the groups of ad user<br>
getent passwd command is also working fine</p></div><div class="reply">
<a rel="nofollow" class="comment-reply-link" href="https://www.rootusers.com/how-to-join-centos-linux-to-an-active-directory-domain/#comment-3521" data-commentid="3521" data-postid="3309" data-belowelement="comment-3521" data-respondelement="respond" aria-label="Reply to daniel">Reply</a></div></div></li></ul></li></ul></li><li class="comment odd alt thread-even depth-1" id="li-comment-3535"><div id="comment-3535"><div class="comment-author vcard">
<cite class="fn">M the Dev</cite>
<span class="comment-meta commentmetadata"><a href="https://www.rootusers.com/how-to-join-centos-linux-to-an-active-directory-domain/#comment-3535">May 11, 2018 at 6:47 am</a></span></div><div class="comment-text"><p>Thank you. I saw so many articles. describing editing several files, etc. this was simple and to the point.</p></div><div class="reply">
<a rel="nofollow" class="comment-reply-link" href="https://www.rootusers.com/how-to-join-centos-linux-to-an-active-directory-domain/#comment-3535" data-commentid="3535" data-postid="3309" data-belowelement="comment-3535" data-respondelement="respond" aria-label="Reply to M the Dev">Reply</a></div></div></li><li class="comment even thread-odd thread-alt depth-1" id="li-comment-3544"><div id="comment-3544"><div class="comment-author vcard">
<cite class="fn">vibe</cite>
<span class="comment-meta commentmetadata"><a href="https://www.rootusers.com/how-to-join-centos-linux-to-an-active-directory-domain/#comment-3544">May 16, 2018 at 2:37 am</a></span></div><div class="comment-text"><p>When binding to AD with sssd, are the AD accounts created with large UIDs? If so, has anyone noticed /var/log/lastlog thinking it’s a huge file when it isn’t. It’s causing backup restore issues.</p><p>If you’ve run into this, have you found a workaround besides dumping to null?</p></div><div class="reply">
<a rel="nofollow" class="comment-reply-link" href="https://www.rootusers.com/how-to-join-centos-linux-to-an-active-directory-domain/#comment-3544" data-commentid="3544" data-postid="3309" data-belowelement="comment-3544" data-respondelement="respond" aria-label="Reply to vibe">Reply</a></div></div></li><li class="comment odd alt thread-even depth-1" id="li-comment-3602"><div id="comment-3602"><div class="comment-author vcard">
<cite class="fn">sha</cite>
<span class="comment-meta commentmetadata"><a href="https://www.rootusers.com/how-to-join-centos-linux-to-an-active-directory-domain/#comment-3602">May 29, 2018 at 9:02 pm</a></span></div><div class="comment-text"><p>i have joined centos 7 with windows ad. facing access denied issue some time. not allways.</p></div><div class="reply">
<a rel="nofollow" class="comment-reply-link" href="https://www.rootusers.com/how-to-join-centos-linux-to-an-active-directory-domain/#comment-3602" data-commentid="3602" data-postid="3309" data-belowelement="comment-3602" data-respondelement="respond" aria-label="Reply to sha">Reply</a></div></div></li><li class="comment even thread-odd thread-alt depth-1" id="li-comment-3814"><div id="comment-3814"><div class="comment-author vcard">
<cite class="fn">Allen</cite>
<span class="comment-meta commentmetadata"><a href="https://www.rootusers.com/how-to-join-centos-linux-to-an-active-directory-domain/#comment-3814">June 13, 2018 at 7:41 pm</a></span></div><div class="comment-text"><p>Great artificial, Thanks Jarrod.<br>
‘Domain Admins’ can login, and sudo to root. I notice that the login is cached, so no password is required. Does anyone know how to stop cached logins? I’ve read the articular <a href="https://www.rootusers.com/how-to-clear-the-sssd-cache-in-linux/" rel="nofollow ugc">https://www.rootusers.com/how-to-clear-the-sssd-cache-in-linux/</a> but to no avail.</p></div><div class="reply">
<a rel="nofollow" class="comment-reply-link" href="https://www.rootusers.com/how-to-join-centos-linux-to-an-active-directory-domain/#comment-3814" data-commentid="3814" data-postid="3309" data-belowelement="comment-3814" data-respondelement="respond" aria-label="Reply to Allen">Reply</a></div></div><ul class="children"><li class="comment odd alt depth-2" id="li-comment-4242"><div id="comment-4242"><div class="comment-author vcard">
<cite class="fn">Lax</cite>
<span class="comment-meta commentmetadata"><a href="https://www.rootusers.com/how-to-join-centos-linux-to-an-active-directory-domain/#comment-4242">March 13, 2019 at 7:27 am</a></span></div><div class="comment-text"><p>Hi,</p><p>I’m having the same issue, seems like the passwords are cached and admins can get in without password prompts.</p><p>Logs show the below</p><p>Authorized to USER, krb5 principal USER@Domain (ssh_gssapi_krb5_cmdok)<br>
Accepted gssapi-with-mic for USER from 10.10.10.197 port 60685 ssh2</p><p>Any help would be appreciated.</p><p>Thanks,</p></div><div class="reply">
<a rel="nofollow" class="comment-reply-link" href="https://www.rootusers.com/how-to-join-centos-linux-to-an-active-directory-domain/#comment-4242" data-commentid="4242" data-postid="3309" data-belowelement="comment-4242" data-respondelement="respond" aria-label="Reply to Lax">Reply</a></div></div></li></ul></li><li class="comment even thread-even depth-1" id="li-comment-3956"><div id="comment-3956"><div class="comment-author vcard">
<cite class="fn">Fernando</cite>
<span class="comment-meta commentmetadata"><a href="https://www.rootusers.com/how-to-join-centos-linux-to-an-active-directory-domain/#comment-3956">September 14, 2018 at 5:18 am</a></span></div><div class="comment-text"><p>I’m in trouble, does anyone help me?</p><p>Tracking Error<br>
Thank you</p><p># realm join –user=administrador nutricash.com.br -v<br>
* Resolving: _ldap._tcp.nutricash.com.br<br>
* Performing LDAP DSE lookup on: 192.168.10.183<br>
* Successfully discovered: nutricash.com.br<br>
Password for administrador:<br>
* Required files: /usr/sbin/oddjobd, /usr/libexec/oddjob/mkhomedir, /usr/sbin/sssd, /usr/bin/net<br>
* LANG=C LOGNAME=root /usr/bin/net -s /var/cache/realmd/realmd-smb-conf.Z4QVOZ -U administrador ads join nutricash.com.br</p><p>Failed to join domain: failed to find DC for domain NUTRICASH – {Operation Failed} The requested operation was unsuccessful.<br>
! Joining the domain nutricash.com.br failed</p></div><div class="reply">
<a rel="nofollow" class="comment-reply-link" href="https://www.rootusers.com/how-to-join-centos-linux-to-an-active-directory-domain/#comment-3956" data-commentid="3956" data-postid="3309" data-belowelement="comment-3956" data-respondelement="respond" aria-label="Reply to Fernando">Reply</a></div></div></li><li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-4005"><div id="comment-4005"><div class="comment-author vcard">
<cite class="fn">mayfield1814</cite>
<span class="comment-meta commentmetadata"><a href="https://www.rootusers.com/how-to-join-centos-linux-to-an-active-directory-domain/#comment-4005">October 16, 2018 at 4:47 am</a></span></div><div class="comment-text"><p>I was able to join my centos 7 vm to the child domain, however users in the parent domain are not seen.<br>
id <a href="mailto:user1@abc.com">user1@abc.com</a> not found<br>
id <a href="mailto:user1@child.abc.com">user1@child.abc.com</a> found<br>
How can I allow access to the parent domain users?</p></div><div class="reply">
<a rel="nofollow" class="comment-reply-link" href="https://www.rootusers.com/how-to-join-centos-linux-to-an-active-directory-domain/#comment-4005" data-commentid="4005" data-postid="3309" data-belowelement="comment-4005" data-respondelement="respond" aria-label="Reply to mayfield1814">Reply</a></div></div><ul class="children"><li class="comment byuser comment-author-jarrod bypostauthor even depth-2" id="li-comment-4006"><div id="comment-4006"><div class="comment-author vcard">
<cite class="fn"><a href="https://www.rootusers.com/" rel="external nofollow ugc" class="url">Jarrod</a></cite>
<span class="comment-meta commentmetadata"><a href="https://www.rootusers.com/how-to-join-centos-linux-to-an-active-directory-domain/#comment-4006">October 16, 2018 at 8:30 am</a></span></div><div class="comment-text"><p>Hmm I assume there is some sort of trust between the domains themselves and that all works fine Windows side? Honestly not too sure, perhaps need to add secondary domain to sssd.conf etc?</p></div><div class="reply">
<a rel="nofollow" class="comment-reply-link" href="https://www.rootusers.com/how-to-join-centos-linux-to-an-active-directory-domain/#comment-4006" data-commentid="4006" data-postid="3309" data-belowelement="comment-4006" data-respondelement="respond" aria-label="Reply to Jarrod">Reply</a></div></div></li></ul></li><li class="comment odd alt thread-even depth-1" id="li-comment-4021"><div id="comment-4021"><div class="comment-author vcard">
<cite class="fn">Muthukumaran Kannan</cite>
<span class="comment-meta commentmetadata"><a href="https://www.rootusers.com/how-to-join-centos-linux-to-an-active-directory-domain/#comment-4021">October 21, 2018 at 4:57 pm</a></span></div><div class="comment-text"><p>Hello, My linux machine joined with the Windows AD successfully but I am not able to list the AD users in linux machine either way without domain name and with domain name. Please assist me someone on this.</p><p>[root@linux-vm-01 ~]# realm join –user=administrator homelab.com<br>
realm: Already joined to this domain<br>
[root@linux-vm-01 ~]#<br>
[root@linux-vm-01 ~]# id <a href="mailto:administrator@homelab.com">administrator@homelab.com</a><br>
id: <a href="mailto:administrator@homelab.com">administrator@homelab.com</a>: no such user<br>
[root@linux-vm-01 ~]#<br>
[root@linux-vm-01 ~]# id administrator<br>
id: administrator: no such user<br>
[root@linux-vm-01 ~]#</p></div><div class="reply">
<a rel="nofollow" class="comment-reply-link" href="https://www.rootusers.com/how-to-join-centos-linux-to-an-active-directory-domain/#comment-4021" data-commentid="4021" data-postid="3309" data-belowelement="comment-4021" data-respondelement="respond" aria-label="Reply to Muthukumaran Kannan">Reply</a></div></div><ul class="children"><li class="comment even depth-2" id="li-comment-4032"><div id="comment-4032"><div class="comment-author vcard">
<cite class="fn">vibe</cite>
<span class="comment-meta commentmetadata"><a href="https://www.rootusers.com/how-to-join-centos-linux-to-an-active-directory-domain/#comment-4032">October 27, 2018 at 4:12 am</a></span></div><div class="comment-text"><p>In Active Directory:</p><p>create security group “group-a”<br>
add computer object to security group “group-a”<br>
open user properties<br>
go to security tab<br>
under group or usernames<br>
add “group-a”<br>
under permissions for domain read, with “group-a” selected,<br>
check the box for “read remote access”</p><p>Ask any Windows sysadmin and they’ll say it’s a linux prob. Took a long time to figure this one out but these are the changes needed to fix most (maybe all, haven’t run into anything new) issues binding linux to AD.</p><p>Hope this helps.</p></div><div class="reply">
<a rel="nofollow" class="comment-reply-link" href="https://www.rootusers.com/how-to-join-centos-linux-to-an-active-directory-domain/#comment-4032" data-commentid="4032" data-postid="3309" data-belowelement="comment-4032" data-respondelement="respond" aria-label="Reply to vibe">Reply</a></div></div></li></ul></li><li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-4044"><div id="comment-4044"><div class="comment-author vcard">
<cite class="fn">wilco23</cite>
<span class="comment-meta commentmetadata"><a href="https://www.rootusers.com/how-to-join-centos-linux-to-an-active-directory-domain/#comment-4044">November 3, 2018 at 12:08 am</a></span></div><div class="comment-text"><p>There is firewall between linux server and windows domain controller. May I know what ports needs to be opened on the firewall?</p></div><div class="reply">
<a rel="nofollow" class="comment-reply-link" href="https://www.rootusers.com/how-to-join-centos-linux-to-an-active-directory-domain/#comment-4044" data-commentid="4044" data-postid="3309" data-belowelement="comment-4044" data-respondelement="respond" aria-label="Reply to wilco23">Reply</a></div></div><ul class="children"><li class="comment byuser comment-author-jarrod bypostauthor even depth-2" id="li-comment-4048"><div id="comment-4048"><div class="comment-author vcard">
<cite class="fn"><a href="https://www.rootusers.com/" rel="external nofollow ugc" class="url">Jarrod</a></cite>
<span class="comment-meta commentmetadata"><a href="https://www.rootusers.com/how-to-join-centos-linux-to-an-active-directory-domain/#comment-4048">November 4, 2018 at 12:40 pm</a></span></div><div class="comment-text"><p><a href="https://docs.microsoft.com/en-us/previous-versions/windows/it-pro/windows-server-2008-R2-and-2008/dd772723(v=ws.10)" rel="nofollow ugc">https://docs.microsoft.com/en-us/previous-versions/windows/it-pro/windows-server-2008-R2-and-2008/dd772723(v=ws.10)</a></p></div><div class="reply">
<a rel="nofollow" class="comment-reply-link" href="https://www.rootusers.com/how-to-join-centos-linux-to-an-active-directory-domain/#comment-4048" data-commentid="4048" data-postid="3309" data-belowelement="comment-4048" data-respondelement="respond" aria-label="Reply to Jarrod">Reply</a></div></div></li></ul></li><li class="comment odd alt thread-even depth-1" id="li-comment-4081"><div id="comment-4081"><div class="comment-author vcard">
<cite class="fn">manolo</cite>
<span class="comment-meta commentmetadata"><a href="https://www.rootusers.com/how-to-join-centos-linux-to-an-active-directory-domain/#comment-4081">November 17, 2018 at 1:48 am</a></span></div><div class="comment-text"><p>Thank you for the post</p></div><div class="reply">
<a rel="nofollow" class="comment-reply-link" href="https://www.rootusers.com/how-to-join-centos-linux-to-an-active-directory-domain/#comment-4081" data-commentid="4081" data-postid="3309" data-belowelement="comment-4081" data-respondelement="respond" aria-label="Reply to manolo">Reply</a></div></div></li><li class="comment even thread-odd thread-alt depth-1" id="li-comment-4155"><div id="comment-4155"><div class="comment-author vcard">
<cite class="fn">Bass</cite>
<span class="comment-meta commentmetadata"><a href="https://www.rootusers.com/how-to-join-centos-linux-to-an-active-directory-domain/#comment-4155">January 5, 2019 at 2:52 am</a></span></div><div class="comment-text"><p>Hi Jarrod! Thanks for the post…it works perfectly!</p><p>Have you had any experience installing samba, and getting it to authenticate with AD? On the same server I just enabled AD authentication on I’m installing Samba, and it seems like samba is not authenticating against AD (or for some reason my shared folder is not working right).</p><p>I used these instructions:<br>
<a href="http://www.hexblot.com/blog/centos-7-active-directory-and-samba" rel="nofollow ugc">http://www.hexblot.com/blog/centos-7-active-directory-and-samba</a></p><p>Samba is started correctly, allowing access from my workstation to the share, but I can’t authenticate. I see all users and groups, and the domain as well as log in via ssh to the server with AD users.</p></div><div class="reply">
<a rel="nofollow" class="comment-reply-link" href="https://www.rootusers.com/how-to-join-centos-linux-to-an-active-directory-domain/#comment-4155" data-commentid="4155" data-postid="3309" data-belowelement="comment-4155" data-respondelement="respond" aria-label="Reply to Bass">Reply</a></div></div><ul class="children"><li class="comment byuser comment-author-jarrod bypostauthor odd alt depth-2" id="li-comment-4158"><div id="comment-4158"><div class="comment-author vcard">
<cite class="fn"><a href="https://www.rootusers.com/" rel="external nofollow ugc" class="url">Jarrod</a></cite>
<span class="comment-meta commentmetadata"><a href="https://www.rootusers.com/how-to-join-centos-linux-to-an-active-directory-domain/#comment-4158">January 5, 2019 at 9:25 pm</a></span></div><div class="comment-text"><p>Hmm don’t think I’ve had to do that one yet, sorry, or maybe it was in a past life that I can’t recall ;)</p></div><div class="reply">
<a rel="nofollow" class="comment-reply-link" href="https://www.rootusers.com/how-to-join-centos-linux-to-an-active-directory-domain/#comment-4158" data-commentid="4158" data-postid="3309" data-belowelement="comment-4158" data-respondelement="respond" aria-label="Reply to Jarrod">Reply</a></div></div></li></ul></li><li class="comment even thread-even depth-1" id="li-comment-4174"><div id="comment-4174"><div class="comment-author vcard">
<cite class="fn">ken</cite>
<span class="comment-meta commentmetadata"><a href="https://www.rootusers.com/how-to-join-centos-linux-to-an-active-directory-domain/#comment-4174">January 14, 2019 at 11:38 am</a></span></div><div class="comment-text"><p>hi Jarrod,</p><p>thanks for the tutorial.<br>
anybody know why my “realm list” lists two entries for the same domain? it says client-software: winbind and then client-software: sssd<br>
i only used sssd to join my rhel to active directory and “service windbind status” returns inactive.</p></div><div class="reply">
<a rel="nofollow" class="comment-reply-link" href="https://www.rootusers.com/how-to-join-centos-linux-to-an-active-directory-domain/#comment-4174" data-commentid="4174" data-postid="3309" data-belowelement="comment-4174" data-respondelement="respond" aria-label="Reply to ken">Reply</a></div></div></li><li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-4190"><div id="comment-4190"><div class="comment-author vcard">
<cite class="fn">Parag Sen</cite>
<span class="comment-meta commentmetadata"><a href="https://www.rootusers.com/how-to-join-centos-linux-to-an-active-directory-domain/#comment-4190">January 31, 2019 at 4:22 am</a></span></div><div class="comment-text"><p>After successfully join the domain to AD and Centos is showing in Active directory.<br>
Error while login with adminstrator getting this<br>
realm join –user=administrator myfujitsulab<br>
realm: specify one realm to join</p></div><div class="reply">
<a rel="nofollow" class="comment-reply-link" href="https://www.rootusers.com/how-to-join-centos-linux-to-an-active-directory-domain/#comment-4190" data-commentid="4190" data-postid="3309" data-belowelement="comment-4190" data-respondelement="respond" aria-label="Reply to Parag Sen">Reply</a></div></div></li><li class="comment even thread-even depth-1" id="li-comment-4206"><div id="comment-4206"><div class="comment-author vcard">
<cite class="fn">Bob jenkin</cite>
<span class="comment-meta commentmetadata"><a href="https://www.rootusers.com/how-to-join-centos-linux-to-an-active-directory-domain/#comment-4206">February 14, 2019 at 2:12 am</a></span></div><div class="comment-text"><p>I followed the instructions without issue. The problem I am facing is I can no longer login as root. Is it possible to belong to domain and still be able to login as root?</p></div><div class="reply">
<a rel="nofollow" class="comment-reply-link" href="https://www.rootusers.com/how-to-join-centos-linux-to-an-active-directory-domain/#comment-4206" data-commentid="4206" data-postid="3309" data-belowelement="comment-4206" data-respondelement="respond" aria-label="Reply to Bob jenkin">Reply</a></div></div><ul class="children"><li class="comment byuser comment-author-jarrod bypostauthor odd alt depth-2" id="li-comment-4208"><div id="comment-4208"><div class="comment-author vcard">
<cite class="fn"><a href="https://www.rootusers.com/" rel="external nofollow ugc" class="url">Jarrod</a></cite>
<span class="comment-meta commentmetadata"><a href="https://www.rootusers.com/how-to-join-centos-linux-to-an-active-directory-domain/#comment-4208">February 14, 2019 at 12:26 pm</a></span></div><div class="comment-text"><p>Yeah that should still work fine, what do the logs say when you attempt to log in as root? I can’t remember, but I think in some sssd/pam file there is some configuration which lets you specify local user accounts should be checked prior to searching the domain.</p></div><div class="reply">
<a rel="nofollow" class="comment-reply-link" href="https://www.rootusers.com/how-to-join-centos-linux-to-an-active-directory-domain/#comment-4208" data-commentid="4208" data-postid="3309" data-belowelement="comment-4208" data-respondelement="respond" aria-label="Reply to Jarrod">Reply</a></div></div></li></ul></li><li class="comment even thread-odd thread-alt depth-1" id="li-comment-4223"><div id="comment-4223"><div class="comment-author vcard">
<cite class="fn"><a href="http://www.adsisoftware.com/" rel="external nofollow ugc" class="url">Theo Reaves</a></cite>
<span class="comment-meta commentmetadata"><a href="https://www.rootusers.com/how-to-join-centos-linux-to-an-active-directory-domain/#comment-4223">February 28, 2019 at 7:26 am</a></span></div><div class="comment-text"><p>I was able to connect to the Active Directory without any issues. I see my cent box in my computers list on my AD. However, when I try<br>
id administrator<br>
or<br>
id <a href="mailto:administrator@myad.com">administrator@myad.com</a><br>
or<br>
id administrator@myad<br>
or<br>
id administrator@myad_ipaddress</p><p>I get back no such user.<br>
everything appears good when I check realm list.</p><p>Where to look?<br>
Thanks</p></div><div class="reply">
<a rel="nofollow" class="comment-reply-link" href="https://www.rootusers.com/how-to-join-centos-linux-to-an-active-directory-domain/#comment-4223" data-commentid="4223" data-postid="3309" data-belowelement="comment-4223" data-respondelement="respond" aria-label="Reply to Theo Reaves">Reply</a></div></div></li><li class="comment odd alt thread-even depth-1" id="li-comment-4285"><div id="comment-4285"><div class="comment-author vcard">
<cite class="fn">Afaq Khan</cite>
<span class="comment-meta commentmetadata"><a href="https://www.rootusers.com/how-to-join-centos-linux-to-an-active-directory-domain/#comment-4285">April 14, 2019 at 4:04 pm</a></span></div><div class="comment-text"><p>very good site thanks<br>
science tech health<br>
<a 0="/" rel="nofollow"></a></p></div><div class="reply">
<a rel="nofollow" class="comment-reply-link" href="https://www.rootusers.com/how-to-join-centos-linux-to-an-active-directory-domain/#comment-4285" data-commentid="4285" data-postid="3309" data-belowelement="comment-4285" data-respondelement="respond" aria-label="Reply to Afaq Khan">Reply</a></div></div></li><li class="comment even thread-odd thread-alt depth-1" id="li-comment-4369"><div id="comment-4369"><div class="comment-author vcard">
<cite class="fn">Bob</cite>
<span class="comment-meta commentmetadata"><a href="https://www.rootusers.com/how-to-join-centos-linux-to-an-active-directory-domain/#comment-4369">June 15, 2019 at 5:10 am</a></span></div><div class="comment-text"><p>I can join fine and the user I joined with can id fine. But I cannot login with AD credentials and no /home/ directories are created. Do I need to create these separately?</p></div><div class="reply">
<a rel="nofollow" class="comment-reply-link" href="https://www.rootusers.com/how-to-join-centos-linux-to-an-active-directory-domain/#comment-4369" data-commentid="4369" data-postid="3309" data-belowelement="comment-4369" data-respondelement="respond" aria-label="Reply to Bob">Reply</a></div></div></li><li class="comment odd alt thread-even depth-1" id="li-comment-4370"><div id="comment-4370"><div class="comment-author vcard">
<cite class="fn">Gab</cite>
<span class="comment-meta commentmetadata"><a href="https://www.rootusers.com/how-to-join-centos-linux-to-an-active-directory-domain/#comment-4370">June 15, 2019 at 5:33 pm</a></span></div><div class="comment-text"><p>No everything should be done automaticcally. Did you implement oddjob* package? Then you must check and setup<br>
/etc/sssd/sssd.conf file.</p></div><div class="reply">
<a rel="nofollow" class="comment-reply-link" href="https://www.rootusers.com/how-to-join-centos-linux-to-an-active-directory-domain/#comment-4370" data-commentid="4370" data-postid="3309" data-belowelement="comment-4370" data-respondelement="respond" aria-label="Reply to Gab">Reply</a></div></div></li><li class="comment even thread-odd thread-alt depth-1" id="li-comment-4394"><div id="comment-4394"><div class="comment-author vcard">
<cite class="fn">Nkumar</cite>
<span class="comment-meta commentmetadata"><a href="https://www.rootusers.com/how-to-join-centos-linux-to-an-active-directory-domain/#comment-4394">June 26, 2019 at 2:42 am</a></span></div><div class="comment-text"><p>Hi,<br>
Nice write up.<br>
AUser access to Linux server is restricted at linux server through AllowUsers or AllowGroups in the sshd_config file.</p><p>Our requirement is to restrict to linux server through Active Directory roles and groups rather than at linux end. is it possible.</p></div><div class="reply">
<a rel="nofollow" class="comment-reply-link" href="https://www.rootusers.com/how-to-join-centos-linux-to-an-active-directory-domain/#comment-4394" data-commentid="4394" data-postid="3309" data-belowelement="comment-4394" data-respondelement="respond" aria-label="Reply to Nkumar">Reply</a></div></div></li><li class="comment odd alt thread-even depth-1" id="li-comment-4478"><div id="comment-4478"><div class="comment-author vcard">
<cite class="fn">Vincent</cite>
<span class="comment-meta commentmetadata"><a href="https://www.rootusers.com/how-to-join-centos-linux-to-an-active-directory-domain/#comment-4478">August 21, 2019 at 10:35 pm</a></span></div><div class="comment-text"><p>Hi. We have performed the task. But I login it I have this message:</p><p>/home/username/.bash_profile: Permission denied<br>
-bash-4.2$</p><p>Because of that username cannot create files</p></div><div class="reply">
<a rel="nofollow" class="comment-reply-link" href="https://www.rootusers.com/how-to-join-centos-linux-to-an-active-directory-domain/#comment-4478" data-commentid="4478" data-postid="3309" data-belowelement="comment-4478" data-respondelement="respond" aria-label="Reply to Vincent">Reply</a></div></div></li><li class="comment even thread-odd thread-alt depth-1" id="li-comment-4539"><div id="comment-4539"><div class="comment-author vcard">
<cite class="fn">jagdish</cite>
<span class="comment-meta commentmetadata"><a href="https://www.rootusers.com/how-to-join-centos-linux-to-an-active-directory-domain/#comment-4539">October 14, 2019 at 6:48 pm</a></span></div><div class="comment-text"><p>we have mix setup as like windows 10 &amp; Ubuntu client, we want disable USB pen drive to all both client, when we apply gpo in ad , windows client not access USB pen drive &amp; Ubuntu client still access USB pen drive<br>
can we apply group policy on Linux base system?</p></div><div class="reply">
<a rel="nofollow" class="comment-reply-link" href="https://www.rootusers.com/how-to-join-centos-linux-to-an-active-directory-domain/#comment-4539" data-commentid="4539" data-postid="3309" data-belowelement="comment-4539" data-respondelement="respond" aria-label="Reply to jagdish">Reply</a></div></div></li><li class="comment odd alt thread-even depth-1" id="li-comment-4575"><div id="comment-4575"><div class="comment-author vcard">
<cite class="fn">John Kirkland</cite>
<span class="comment-meta commentmetadata"><a href="https://www.rootusers.com/how-to-join-centos-linux-to-an-active-directory-domain/#comment-4575">November 25, 2019 at 7:58 am</a></span></div><div class="comment-text"><p>A great post, thank you very much. To add, it would be nice to configure the NTP client. The idea is that the NTP client synchronizes time with the domain controller (DC). Here is an interesting guide to check: <a href="https://www.sysadmit.com/2019/11/linux-anadir-equipo-al-dominio-windows.html" title="https://www.sysadmit.com/2019/11/linux-anadir-equipo-al-dominio-windows.html" rel="nofollow ugc"></a></p></div><div class="reply">
<a rel="nofollow" class="comment-reply-link" href="https://www.rootusers.com/how-to-join-centos-linux-to-an-active-directory-domain/#comment-4575" data-commentid="4575" data-postid="3309" data-belowelement="comment-4575" data-respondelement="respond" aria-label="Reply to John Kirkland">Reply</a></div></div></li><li class="comment even thread-odd thread-alt depth-1" id="li-comment-4589"><div id="comment-4589"><div class="comment-author vcard">
<cite class="fn">dienmayades</cite>
<span class="comment-meta commentmetadata"><a href="https://www.rootusers.com/how-to-join-centos-linux-to-an-active-directory-domain/#comment-4589">December 11, 2019 at 6:20 pm</a></span></div><div class="comment-text"><p>thanks for sharing</p></div><div class="reply">
<a rel="nofollow" class="comment-reply-link" href="https://www.rootusers.com/how-to-join-centos-linux-to-an-active-directory-domain/#comment-4589" data-commentid="4589" data-postid="3309" data-belowelement="comment-4589" data-respondelement="respond" aria-label="Reply to dienmayades">Reply</a></div></div></li></ol><div class="navigation"></div><div id="respond" class="comment-respond"><h3 id="reply-title" class="comment-reply-title">Leave a Comment <small><a rel="nofollow" id="cancel-comment-reply-link" href="https://www.rootusers.com/how-to-join-centos-linux-to-an-active-directory-domain/#respond" style="display:none;"><small>Cancel reply</small></a></small></h3><form action="https://www.rootusers.com/wp-comments-post.php" method="post" id="commentform" class="comment-form"><p class="comment-form-comment"><textarea aria-required="true" rows="8" cols="45" name="comment" id="comment" onkeydown="if (!window.__cfRLUnblockHandlers) return false; if(event.ctrlKey){if(event.keyCode==13){document.getElementById(&#39;submit&#39;).click();return false}};"></textarea></p><p class="comment-note">NOTE - You can use these <abbr title="HyperText Markup Language">HTML</abbr> tags and attributes:<br> <code>&lt;a href="" title=""&gt; &lt;abbr title=""&gt; &lt;acronym title=""&gt; &lt;b&gt; &lt;blockquote cite=""&gt; &lt;cite&gt; &lt;code&gt; &lt;del datetime=""&gt; &lt;em&gt; &lt;i&gt; &lt;q cite=""&gt; &lt;s&gt; &lt;strike&gt; &lt;strong&gt; </code></p><p class="comment-form-author"><input id="author" name="author" type="text" value="" size="30"> <label for="author"><small>NAME</small></label></p><p class="comment-form-email"><input id="email" name="email" type="text" value="" size="30"> <label for="email">EMAIL</label></p><p class="comment-form-url"><input id="url" name="url" type="text" value="" size="30"> <label for="url">Website URL</label></p><p class="comment-subscription-form"><input type="checkbox" name="subscribe_comments" id="subscribe_comments" value="subscribe" style="width: auto; -moz-appearance: checkbox; -webkit-appearance: checkbox;"> <label class="subscribe-label" id="subscribe-label" for="subscribe_comments">Notify me of follow-up comments by email.</label></p><p class="comment-subscription-form"><input type="checkbox" name="subscribe_blog" id="subscribe_blog" value="subscribe" style="width: auto; -moz-appearance: checkbox; -webkit-appearance: checkbox;"> <label class="subscribe-label" id="subscribe-blog-label" for="subscribe_blog">Notify me of new posts by email.</label></p><p class="form-submit"><input name="submit" type="submit" id="submit" class="submit" value="SUBMIT"> <input type="hidden" name="comment_post_ID" value="3309" id="comment_post_ID">
<input type="hidden" name="comment_parent" id="comment_parent" value=""></p><p style="display: none;"><input type="hidden" id="akismet_comment_nonce" name="akismet_comment_nonce" value="28abc6aebe"></p><p style="display: none;"></p><input type="hidden" id="ak_js" name="ak_js" value="1576669748733"></form></div></div><div id="sidebar-border"><div id="rss_border"><div class="rss_border"><div id="rss_wrap"><div class="rss_wrap">
<a class="facebook" href="https://www.facebook.com/rootusers1" target="_blank" rel="author" title="Facebook">Facebook</a>
<a class="twitter" href="https://twitter.com/RootUsers_" target="_blank" rel="author" title="Follow me on twitter.">Follow me on twitter.</a>
<a class="googleplus" href="https://google.com/+Rootusers1" target="_blank" rel="publisher" title="Google+">Google+</a>
<a class="rss " href="https://www.rootusers.com/feed/" target="_blank" rel="bookmark" title="RSS Feed">RSS Feed</a></div></div></div></div><div id="sidebar"><div id="text-4" class="widget widget_text"><div class="textwidget"><script async="" src="./How To Join CentOS Linux To An Active Directory Domain_files/f(9).txt" type="text/javascript"></script>
<ins class="adsbygoogle" style="display:inline-block;width:300px;height:250px" data-ad-client="ca-pub-5558140142523368" data-ad-slot="9802576336" data-adsbygoogle-status="done"><ins id="aswift_2_expand" style="display:inline-table;border:none;height:250px;margin:0;padding:0;position:relative;visibility:visible;width:300px;background-color:transparent;"><ins id="aswift_2_anchor" style="display:block;border:none;height:250px;margin:0;padding:0;position:relative;visibility:visible;width:300px;background-color:transparent;"><iframe width="300" height="250" frameborder="0" marginwidth="0" marginheight="0" vspace="0" hspace="0" allowtransparency="true" scrolling="no" allowfullscreen="true" onload="var i=this.id,s=window.google_iframe_oncopy,H=s&amp;&amp;s.handlers,h=H&amp;&amp;H[i],w=this.contentWindow,d;try{d=w.document}catch(e){}if(h&amp;&amp;d&amp;&amp;(!d.body||!d.body.firstChild)){if(h.call){setTimeout(h,0)}else if(h.match){try{h=s.upd(h,i)}catch(e){}w.location.replace(h)}}" id="aswift_2" name="aswift_2" style="left:0;position:absolute;top:0;border:0px;width:300px;height:250px;" src="./How To Join CentOS Linux To An Active Directory Domain_files/saved_resource(6).html"></iframe></ins></ins></ins> <script type="text/javascript">(adsbygoogle=window.adsbygoogle||[]).push({});</script></div></div><div id="blog_subscription-2" class="widget widget_blog_subscription jetpack_subscription_widget"><h3 class="widgettitle">Subscribe</h3><form action="https://www.rootusers.com/how-to-join-centos-linux-to-an-active-directory-domain/#" method="post" accept-charset="utf-8" id="subscribe-blog-blog_subscription-2"><div id="subscribe-text"><p>Receive new post notifications by email for free! Unsubscribe any time.</p></div><p id="subscribe-email">
<label id="jetpack-subscribe-label" class="screen-reader-text" for="subscribe-field-blog_subscription-2">
Email Address </label>
<input type="email" name="email" required="required" class="required" value="" id="subscribe-field-blog_subscription-2" placeholder="Email Address"></p><p id="subscribe-submit">
<input type="hidden" name="action" value="subscribe">
<input type="hidden" name="source" value="https://www.rootusers.com/how-to-join-centos-linux-to-an-active-directory-domain/">
<input type="hidden" name="sub-type" value="widget">
<input type="hidden" name="redirect_fragment" value="blog_subscription-2">
<button type="submit" name="jetpack_subscriptions_widget">
Subscribe </button></p></form></div><div id="recent-posts-2" class="widget widget_recent_entries"><h3 class="widgettitle">Recent Posts</h3><ul><li>
<a href="https://www.rootusers.com/create-and-edit-text-files-rhel-8-rhcsa/">Create and edit text files – RHEL 8 RHCSA</a></li><li>
<a href="https://www.rootusers.com/create-delete-copy-and-move-files-and-directories-rhel-8-rhcsa/">Create, delete, copy, and move files and directories – RHEL 8 RHCSA</a></li><li>
<a href="https://www.rootusers.com/rhcsa-8-create-hard-and-soft-links/">Create hard and soft links – RHEL 8 RHCSA</a></li><li>
<a href="https://www.rootusers.com/amd-radeon-vii-hashcat-benchmark/">AMD Radeon VII – Hashcat Benchmark</a></li><li>
<a href="https://www.rootusers.com/how-to-enable-ping-in-windows-server-2019-firewall/">How To Enable Ping In Windows Server 2019 Firewall</a></li></ul></div><div id="categories-2" class="widget widget_categories"><h3 class="widgettitle">Categories</h3><ul><li class="cat-item cat-item-82"><a href="https://www.rootusers.com/category/command-examples/">Command Examples</a></li><li class="cat-item cat-item-48"><a href="https://www.rootusers.com/category/exam-guides/">Exam Guides</a></li><li class="cat-item cat-item-63"><a href="https://www.rootusers.com/category/how-to/">How To</a></li><li class="cat-item cat-item-4"><a href="https://www.rootusers.com/category/linux/">Linux</a></li><li class="cat-item cat-item-61"><a href="https://www.rootusers.com/category/security/">Security</a></li><li class="cat-item cat-item-3"><a href="https://www.rootusers.com/category/technology/">Technology</a></li><li class="cat-item cat-item-1"><a href="https://www.rootusers.com/category/uncategorized/">Uncategorized</a></li><li class="cat-item cat-item-5"><a href="https://www.rootusers.com/category/windows/">Windows</a></li><li class="cat-item cat-item-60"><a href="https://www.rootusers.com/category/xenserver/">XenServer</a></li></ul></div><div id="text-5" class="widget widget_text"><div class="textwidget"><script async="" src="./How To Join CentOS Linux To An Active Directory Domain_files/f(9).txt" type="text/javascript"></script>
<ins class="adsbygoogle" style="display:inline-block;width:300px;height:600px" data-ad-client="ca-pub-5558140142523368" data-ad-slot="2708682732" data-adsbygoogle-status="done"><ins id="aswift_3_expand" style="display:inline-table;border:none;height:600px;margin:0;padding:0;position:relative;visibility:visible;width:300px;background-color:transparent;"><ins id="aswift_3_anchor" style="display:block;border:none;height:600px;margin:0;padding:0;position:relative;visibility:visible;width:300px;background-color:transparent;"><iframe width="300" height="600" frameborder="0" marginwidth="0" marginheight="0" vspace="0" hspace="0" allowtransparency="true" scrolling="no" allowfullscreen="true" onload="var i=this.id,s=window.google_iframe_oncopy,H=s&amp;&amp;s.handlers,h=H&amp;&amp;H[i],w=this.contentWindow,d;try{d=w.document}catch(e){}if(h&amp;&amp;d&amp;&amp;(!d.body||!d.body.firstChild)){if(h.call){setTimeout(h,0)}else if(h.match){try{h=s.upd(h,i)}catch(e){}w.location.replace(h)}}" id="aswift_3" name="aswift_3" style="left:0;position:absolute;top:0;border:0px;width:300px;height:600px;" src="./How To Join CentOS Linux To An Active Directory Domain_files/saved_resource(7).html"></iframe></ins></ins></ins> <script type="text/javascript">(adsbygoogle=window.adsbygoogle||[]).push({});</script></div></div></div></div></div><div class="clear"></div><div id="footer"><div id="footer-inside"><p>
Copyright © 2019 RootUsers | <a href="https://www.rootusers.com/privacy-policy/">Privacy Policy</a> | <a href="https://www.rootusers.com/terms-and-conditions/">Terms and Conditions</a></p>
<span id="back-to-top">↑ <a href="https://www.rootusers.com/how-to-join-centos-linux-to-an-active-directory-domain/#" rel="nofollow" title="Back to top">Top</a></span></div></div> <script type="text/javascript">(function(){var nav=document.getElementById('menus'),button=document.getElementById('menus-m'),menu=document.getElementById('menus-dt');if(!nav){return;}
if(!button){return;}
if(!menu||!menu.childNodes.length){button.style.display='none';return;}
button.onclick=function(){if(-1!==button.className.indexOf('b-toggled-on')){button.className=button.className.replace(' b-toggled-on','');menu.className=menu.className.replace(' toggled-on','');}else{button.className+=' b-toggled-on';menu.className+=' toggled-on';}};})();</script> <div style="display:none"></div> <script type="text/javascript">window.WPCOM_sharing_counts={"https:\/\/www.rootusers.com\/how-to-join-centos-linux-to-an-active-directory-domain\/":3309};</script>  <script type="text/javascript" src="./How To Join CentOS Linux To An Active Directory Domain_files/devicepx-jetpack.js.download"></script> <script defer="" src="./How To Join CentOS Linux To An Active Directory Domain_files/4ab7c.js.download" type="text/javascript"></script> <script type="text/javascript">var sharing_js_options={"lang":"en","counts":"1","is_stats_active":"1"};</script> <script defer="" src="./How To Join CentOS Linux To An Active Directory Domain_files/d6089.js.download" type="text/javascript"></script> <script type="text/javascript">var windowOpen;jQuery(document.body).on('click','a.share-facebook',function(){if('undefined'!==typeof windowOpen){windowOpen.close();}
windowOpen=window.open(jQuery(this).attr('href'),'wpcomfacebook','menubar=1,resizable=1,width=600,height=400');return false;});var windowOpen;jQuery(document.body).on('click','a.share-twitter',function(){if('undefined'!==typeof windowOpen){windowOpen.close();}
windowOpen=window.open(jQuery(this).attr('href'),'wpcomtwitter','menubar=1,resizable=1,width=600,height=350');return false;});var windowOpen;jQuery(document.body).on('click','a.share-linkedin',function(){if('undefined'!==typeof windowOpen){windowOpen.close();}
windowOpen=window.open(jQuery(this).attr('href'),'wpcomlinkedin','menubar=1,resizable=1,width=580,height=450');return false;});var windowOpen;jQuery(document.body).on('click','a.share-tumblr',function(){if('undefined'!==typeof windowOpen){windowOpen.close();}
windowOpen=window.open(jQuery(this).attr('href'),'wpcomtumblr','menubar=1,resizable=1,width=450,height=450');return false;});var windowOpen;jQuery(document.body).on('click','a.share-pocket',function(){if('undefined'!==typeof windowOpen){windowOpen.close();}
windowOpen=window.open(jQuery(this).attr('href'),'wpcompocket','menubar=1,resizable=1,width=450,height=450');return false;});</script> <script async="async" type="text/javascript" src="./How To Join CentOS Linux To An Active Directory Domain_files/e-201951.js.download" defer="defer"></script> <script type="text/javascript">_stq=window._stq||[];_stq.push(['view',{v:'ext',j:'1:8.0',blog:'82012818',post:'3309',tz:'10',srv:'www.rootusers.com'}]);_stq.push(['clickTrackerInit','82012818','3309']);</script> <script type="text/javascript">var bwpRecaptchaCallback=function(){};</script> <script async="" src="https://www.google.com/recaptcha/api.js?onload=bwpRecaptchaCallback&amp;render=explicit" defer="" type="text/javascript"></script> <div id="sharing_email" style="display: none;"><form action="https://www.rootusers.com/how-to-join-centos-linux-to-an-active-directory-domain/" method="post">
<label for="target_email">Send to Email Address</label>
<input type="email" name="target_email" id="target_email" value="">
<label for="source_name">Your Name</label>
<input type="text" name="source_name" id="source_name" value=""><label for="source_email">Your Email Address</label>
<input type="email" name="source_email" id="source_email" value=""><input type="text" id="jetpack-source_f_name" name="source_f_name" class="input" value="" size="25" autocomplete="off" title="This field is for validation and should not be changed">
<img style="float: right; display: none" class="loading" src="./How To Join CentOS Linux To An Active Directory Domain_files/loading.gif" alt="loading" width="16" height="16" scale="0">
<input type="submit" value="Send Email" class="sharing_send">
<a rel="nofollow" href="https://www.rootusers.com/how-to-join-centos-linux-to-an-active-directory-domain/#cancel" class="sharing_cancel" role="button">Cancel</a><div class="errors errors-1" style="display: none;">
Post was not sent - check your email addresses!</div><div class="errors errors-2" style="display: none;">
Email check failed, please try again</div><div class="errors errors-3" style="display: none;">
Sorry, your blog cannot share posts by email.</div></form></div><ins class="adsbygoogle adsbygoogle-noablate" data-adsbygoogle-status="done" style="display: none !important;"><ins id="aswift_4_expand" style="display:inline-table;border:none;height:0px;margin:0;padding:0;position:relative;visibility:visible;width:0px;background-color:transparent;"><ins id="aswift_4_anchor" style="display:block;border:none;height:0px;margin:0;padding:0;position:relative;visibility:visible;width:0px;background-color:transparent;"><iframe frameborder="0" marginwidth="0" marginheight="0" vspace="0" hspace="0" allowtransparency="true" scrolling="no" allowfullscreen="true" onload="var i=this.id,s=window.google_iframe_oncopy,H=s&amp;&amp;s.handlers,h=H&amp;&amp;H[i],w=this.contentWindow,d;try{d=w.document}catch(e){}if(h&amp;&amp;d&amp;&amp;(!d.body||!d.body.firstChild)){if(h.call){setTimeout(h,0)}else if(h.match){try{h=s.upd(h,i)}catch(e){}w.location.replace(h)}}" id="aswift_4" name="aswift_4" style="left:0;position:absolute;top:0;border:0px;width:0px;height:0px;" src="./How To Join CentOS Linux To An Active Directory Domain_files/saved_resource(8).html"></iframe></ins></ins></ins><iframe id="google_osd_static_frame_9685338184594" name="google_osd_static_frame" style="display: none; width: 0px; height: 0px;" src="./How To Join CentOS Linux To An Active Directory Domain_files/saved_resource(9).html"></iframe><img src="./How To Join CentOS Linux To An Active Directory Domain_files/g.gif" alt=":)" width="6" height="5" id="wpstats" scale="0"></body><iframe id="google_esf" name="google_esf" src="./How To Join CentOS Linux To An Active Directory Domain_files/zrt_lookup.html" data-ad-client="ca-pub-5558140142523368" style="display: none;"></iframe></html>